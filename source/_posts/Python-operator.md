---
title: Python - operator
tags:
  - Python
  - operator
categories: Python
abbrlink: 1458295714
date: 2020-01-07 23:12:22
---

# å‰è¨€

æœ€è¿‘åœ¨å¯¦ä½œéœ€è¦è™•ç†å­—ä¸²ä¸¦ä¸”æŠŠå®ƒæ”¹æˆçœŸå¯¦çš„`åˆ¤æ–·å¼`ï¼Œæ‰¾ google çš„éç¨‹ä¸­æ‰¾åˆ°äº†[ä¸€ç¯‡è§£ç­”](https://stackoverflow.com/questions/1740726/turn-string-into-operator)ï¼Œç•¶ä¸­å‰›å¥½çœ‹åˆ° [Operator](https://docs.python.org/3/library/operator.html) é€™å€‹å¥—ä»¶ï¼Œä»¥ä¸‹å°±ç”¨ä¸€äº›ç¯„ä¾‹ä¾†ç¤ºç¯„ï½

# å¯¦ä½œ

è™•ç†çš„ç¯„ä¾‹: `1=1AND2<5OR8>9`

å¯ä»¥ä½¿ç”¨`re`æŠŠå­—ä¸²è™•ç†æˆé™£åˆ—

```python
re.split("AND|OR", payload)
# -> [1=1, 2<5, 8>9]
```

> æ¥è‘—å†ä½¿ç”¨`è¿´åœˆ`+åŒæ¨£çš„æ–¹æ³•å»è™•ç†æ‰`=`ã€`>`ã€`<`

åœ¨è™•ç†å®Œä¹‹å¾Œå°±å¯ä»¥æ‰¾åˆ°æ‰€æœ‰çš„ `key` ä»¥åŠ `value` çš„é™£åˆ—

æ¥è‘—å°±æ˜¯è¦æŠŠ `AND`ã€`OR` æ‰¾å‡ºä¾†å­˜ä¸‹ä¾†ï¼Œé€™é‚Šæˆ‘æœƒæœƒä½¿ç”¨`split('AND', 1)`åªåˆ‡ç¬¬ä¸€å€‹æ‰¾åˆ°çš„`AND`å­—ä¸²ï¼Œå› ç‚ºåƒæ˜¯ SQL Where å­å¥çš„åŠŸèƒ½è¦ä¸€å€‹ä¸€å€‹è™•ç†æ‰è¡Œï¼Œå¦å‰‡æœ€å¾Œåˆ¤æ–·æœƒå‡ºå•é¡Œã€‚

```python
while re.search('(AND)|(OR)', payload) is not None:
    result = payload.split('AND', 1)
    if result[0] and ... # åˆ¤æ–· AND å­—ä¸²
    result = payload.split('OR', 1)
    if result[0] and ... # åˆ¤æ–· OR å­—ä¸²
```

æ¥è‘—å†åˆ‡å®Œä¹‹å¾Œæœƒæ‹¿åˆ°`operator_list`çŸ¥é“è£¡é¢æœ‰å“ªäº›é‹ç®—å­çš„é™£åˆ—ï¼Œä»¥åŸæœ¬çš„è³‡æ–™ä¾†èªªå¯ä»¥ç”¨è¿´åœˆå»è™•ç†ï¼Œé€™é‚Šæˆ‘å°±ç”¨ç°¡å–®çš„ç¯„ä¾‹ä¾†è¡¨ç¤º`operator`å¯ä»¥è™•ç†çš„æ±è¥¿ã€‚

åƒæ˜¯`operator`é™¤äº†å¯ä»¥åˆ¤æ–·ç´”æ•¸å­—ä»¥åŠç´”å­—ä¸²ä»¥å¤–ï¼Œä¹Ÿå¯åˆ¤æ–·`è‹±æ–‡`+`æ•¸å­—`çš„çµ„åˆã€‚

```python
operator_list = ['>', '<', '=']
if operator_list[0] == '>':
    result = operator.gt(2, 0)
if operator_list[1] == '<':
    result = operator.lt('z01', 'z99')
if operator_list[2] == '=':
    result = operator.eq('A', 'A')
```

ä½¿ç”¨ä»¥ä¸Šæ–¹æ³•å¯ä»¥æ¯”å°é‹ç®—å­ï¼Œè€Œä½¿ç”¨ä»¥ä¸‹æ–¹æ³•å‰‡å¯ä»¥æ¯”å°`AND`ä»¥åŠ`OR`

```python
ex = ['AND', 'OR']
if ex[0] == 'AND':
    result = operator.and_(1, 1)
if ex[1] == 'OR':
    result = operator.or_(1, 0)
```

# çµè«–

é€é `operator` é€™å€‹å‡½ç¤ºåº«è®“æˆ‘è™•ç†`é‹ç®—å­å€‘`å¯ä»¥å°‘å¾ˆå¤šäº‹ï¼Œè—‰æ­¤ç´€éŒ„ä¸€ä¸‹å·¥ä½œä¸Šä½¿é‡åˆ°çš„ä¸€äº›æ–¹æ³•ä»¥åŠå•é¡Œï¼Œæœ€é©šè¨çš„å°±æ˜¯å¯ä»¥æ¯”å°`è‹±æ–‡`+`ä¸­æ–‡`çš„åˆ¤æ–·å¼ï¼Œä»¥ä¸€äº›éŸŒé«”çš„æœ¬ç‰ˆè³‡è¨Šä¾†èªªä»–å€‘æœƒæ“æœ‰é€™æ¨£çš„çµ„åˆï¼Œåœ¨ä¸Šå‚³ä¹‹å¾Œè¦æ¯”å°æ™‚ç”¨é€™æ¨£çš„æ–¹æ³•å°±å¾ˆæ–¹ä¾¿ï¼Œè‹¥æœ‰ä»€éº¼å•é¡Œæ­¡è¿ç•™è¨€çµ¦æˆ‘ ğŸ˜Š

# åƒè€ƒ

- [stackoverflow](https://stackoverflow.com/questions/1740726/turn-string-into-operator)
- [operator](https://docs.python.org/3/library/operator.html)
