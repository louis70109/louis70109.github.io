---
title: Day10 - LINE çš„æœå‹™éƒ½ç©äº†ï¼Œæ€éº¼èƒ½å¿˜äº† Message api (Bot) å‘¢ï¼Ÿ (1) - ä»‹ç´¹
tags:
  - LINE
  - Message API
  - chatbot
categories: 2019éµäººè³½
abbrlink: 1032560461
date: 2019-09-24 20:36:40
---

## ç°¡ä»‹

LINE åœ¨ 2016 å¹´ 9 æœˆåº•ç™¼è¡¨äº† Messaging API åŠŸèƒ½ï¼Œç”¨æˆ¶å¯ä»¥é€é Messaging API å°‡è‡ªå®¶çš„æœå‹™å…§å®¹ä¸²è¯åˆ° LINE@ ä¸Šã€‚

æ¥è‘—åœ¨ 2019/04/18 ä¹‹å¾Œ LINE@ 2.0 æ­£å¼ä¸Šç·šï¼Œåœ¨ 5/22 å¾Œæœ‰å‡ç´šçš„é¸é …ä¸¦æœƒé™¸çºŒæ›´æ–°ï¼Œå‡ç´šå®Œçš„å®˜æ–¹å¸³è™Ÿä¹Ÿå¯ä»¥ç”³è«‹å°ˆå±¬ IDã€é€²è¡Œå¸³è™Ÿèªè­‰ã€‚

æˆ‘èªç‚ºæ¯”å‰ä¸€ç‰ˆæœ¬çš„æœ€å¤§çš„å¥½è™•æ˜¯åœ¨**å¥½å‹ç„¡ä¸Šé™**çš„é€™éƒ¨åˆ†ï¼Œä»¥å‰åªèƒ½æœ‰ 50 ä½å¥½å‹ï¼Œè‹¥ä¸€èˆ¬é–‹ç™¼è€…çš„æ©Ÿå™¨äººå¥½ä¸å®¹æ˜“ä¸Šç·šäº†ä¸¦é–‹æ”¾æ¸¬è©¦æ™‚è¢«é™åˆ¶ä½ï¼Œé™¤äº†å†é–‹ä¸€éš»æ©Ÿå™¨äººæˆ–æ˜¯å…¶ä»–æ–¹æ³•å°±è¶…éº»ç…©ï¼Œç¾åœ¨å¥½å‹ç„¡ä¸Šé™äº†ï¼Œå°±ä¸æœƒæœ‰ä¸Šè¿°çš„å•é¡Œäº†ã€‚

> è‹¥æ‚¨ä»¥å‰æœ‰é–‹ç™¼éçš„æ©Ÿå™¨äººåˆ°ç¾åœ¨é‚„æ²’å‡ç´šçš„è©±ï¼Œå¯ä»¥åƒè€ƒ -> [URL](http://at-blog.line.me/tw/archives/lineat_manual_upgrade_02.html)

é€™é‚Šéœ€è¦æ³¨æ„ 1 on 1 èŠå¤©èˆ‡ Messaging API æ˜¯ç„¡æ³•åŒæ™‚ä½¿ç”¨çš„ï¼Œä½†å¯ä»¥åœ¨å¾Œå°åˆ‡æ›çœ‹è¦ä½¿ç”¨å“ªç¨®æ¨¡å¼èˆ‡é¡§å®¢äº’å‹•ã€‚å°è©±è¨˜éŒ„ä¹Ÿæœƒä¿å­˜åœ¨å„è‡ªçš„æ¨¡å¼ä¸‹ï¼Œè‹¥è¦æŸ¥çœ‹å®Œæ•´çš„å°è©±è¨˜éŒ„çš„è©±æœƒå»ºè­°ä»¥å›ºå®šæ¨¡å¼èˆ‡é¡§å®¢é€²è¡Œäº’å‹•å“¦ï¼

### ä¸»è¦çš„åŠŸèƒ½ç’°ç¹åœ¨ä»¥ä¸‹å…©é»

![](https://i.imgur.com/kqf5mo5.png)

1. **Push mode:** ä¸»å‹•æ¨æ’­è¨Šæ¯çµ¦ç”¨æˆ¶ï¼Œ2.0 æ¯å€‹æ©Ÿå™¨äººéƒ½æœ‰ 500 å‰‡å…è²»æ¨æ’­å‰‡æ•¸ï¼Œè¶…éå‰‡æ•¸çš„è©±å¯ä»¥åƒè€ƒä»¥ä¸‹çš„åƒ¹ç›®è¡¨ï¼š

![](https://i.imgur.com/7HJySLK.png)

2. **Reply mode:** é€™å€‹æ¨¡å¼æ˜¯æ¥å—ä½¿ç”¨è€…çš„è¨Šæ¯ä¸¦é€é webhook æ‰“åˆ°ä¼ºæœå™¨ä¸Šè®“ä¼ºæœå™¨å»åšå°æ‡‰è¨Šæ¯çš„è™•ç†ï¼Œé‡é»æ˜¯å®ƒæ˜¯æ˜¯å…è²»ã€å…è²»ã€å…è²»çš„ï¼æ‰€ä»¥è‹¥èƒ½å¼•å°ä½¿ç”¨è€…å»è¼¸å…¥è¨Šæ¯çš„è©±ç”¨é€™å€‹æ¨¡å¼æ˜¯ä¸ç”¨éŒ¢çš„å“¦ ğŸ‰

Message API æ”¯æ´ä»¥ä¸‹æ ¼å¼

- Text message
- Sticker message
- Image message
- Video message
- Audio message
- Location message
- Imagemap message
- Template message
- Flex message

> è©³ç´°å…§å®¹å¯ä»¥åƒè€ƒ [LINE doc](https://developers.line.biz/en/docs/messaging-api/message-types/)

![line sample 1](https://i.imgur.com/PLWylFy.png)
![line sample 2](https://i.imgur.com/lInGVV0.png)

## å›å‚³æ ¼å¼

Message API å›å‚³æ ¼å¼éƒ½æ˜¯ä¸€å€‹é™£åˆ—çš„æ ¼å¼ï¼Œä¸€é–‹å§‹åœ¨æ¥çš„æ™‚å€™éƒ½æ²’æ³¨æ„åˆ°ä¸€ç›´ç˜‹ç‹‚å‡ºéŒ¯ï¼Œäº‹å¯¦ä¸Šé€™æ¨£é™£åˆ—å° Server æœ‰å€‹å¥½è™•å°±æ˜¯ç•¶ä¸€æ¬¡éœ€è¦é€è¼ƒå¤šè¨Šæ¯æ™‚æ ¼å¼æœƒæ¯”è¼ƒçµ±ä¸€ï¼Œåªæ˜¯å°æ–¼æœ‰æ½”ç™–çš„é–‹ç™¼è€…ä¾†èªªæ¯æ¬¡éƒ½è¦å¤šæ‰“`[0]`æœƒè¦ºå¾—æœ‰é»é«’ ğŸ¤£

```
{
  'events': [{
    'replyToken': '00000000000000000000000000000000',
    'type': 'message',
    'timestamp': 1568983962754,
    'source': {
      'type': 'user',
      'userId': 'Udeadbeefdaaaaefdeadbeefdeadbeef'
    },
    'message': {
      'id': '100001',
      'type': 'text',
      'text': 'Hello, world'
    }
  }, {
    'replyToken': 'ffffffffffffffffffffffffffffffff',
    'type': 'message',
    'timestamp': 1568983962754,
    'source': {
      'type': 'user',
      'userId': 'Udeadbeeaaaaefdeadbeefdeadbeef'
    },
    'message': {
      'id': '100002',
      'type': 'sticker',
      'packageId': '1',
      'stickerId': '1'
    }
  }]
}
```

## çµè«–

ä»¥å‰å‰›é–‹å§‹æ¥ LINE Message API çš„æ™‚å€™éƒ½è¦ºå¾—ä»–çš„æ–‡ä»¶ä¸å¤ªäººæ€§ï¼Œæ›´æ–°åˆ°ç¾åœ¨æ–‡ä»¶å…§å®¹ä¹Ÿè¶Šä¾†å®Œæ•´ï¼Œè®“é–‹ç™¼è€…åœ¨é–‹ç™¼çš„éç¨‹ä¸­ä¸ç”¨å†ç‚ºäº†æ‰¾ä¸åˆ°æ–‡ä»¶è€Œæ”¾æ£„äº†(æˆ‘ä»¥å‰å°±æ˜¯ ğŸ¤£)ï¼Œä¸‹ä¸€ç¯‡å°‡æœƒå¸¶ä¾†å¦‚ä½•ç”³è«‹ä¸€éš»æ©Ÿå™¨äººåˆ°å¦‚ä½•å»ºç«‹ä¸€å€‹ webhook API åˆ° AWS ä¸Š

## åƒè€ƒ

[åŠŸèƒ½ä»‹ç´¹ã€‘Messaging API](http://at-blog.line.me/tw/messaging_api_intro)
[LINE message template](https://developers.line.biz/en/docs/messaging-api/message-types/)
