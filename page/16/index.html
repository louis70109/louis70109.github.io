<!DOCTYPE html>
<html lang="zh-tw">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.1">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PCZH6S3');</script>
<!-- End Google Tag Manager -->
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"nijialin.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":true,"storage":true,"lazyload":false,"nav":null},"algolia":{"appID":"SY0XRJ8TKG","apiKey":"3598514b8d34a9c4d1fa895de761cfa2","indexName":"nijia_factor","hits":{"per_page":10},"labels":{"input_placeholder":"æœå°‹æ–‡ç«  & å…§å®¹","hits_empty":"æ‰¾ä¸åˆ°æ‚¨è¼¸å…¥çš„é—œéµå­—: ${query}","hits_stats":"æ‰¾åˆ°äº† ${hits} ç­†çµæœï¼ŒèŠ±äº† ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":-1,"unescape":false,"preload":false},"motion":{"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="You are what you do.">
<meta property="og:type" content="website">
<meta property="og:title" content="å¿è€…å·¥åŠ">
<meta property="og:url" content="https://nijialin.com/page/16/index.html">
<meta property="og:site_name" content="å¿è€…å·¥åŠ">
<meta property="og:description" content="You are what you do.">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="NiJia Lin">
<meta property="article:tag" content="LINE, python, LINE Bot, nijialin, nijia, javascript, chatbot">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://nijialin.com/page/16/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-tw'
  };
</script>

  <title>å¿è€…å·¥åŠ</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FYYPR3Z2K3"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-FYYPR3Z2K3');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="å¿è€…å·¥åŠ" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ›å°èˆªæ¬„">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">å¿è€…å·¥åŠ</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é </a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>é—œæ–¼</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ¨™ç±¤</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†é¡</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>æ­¸æª”</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœå°‹
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="algolia-results">
  <div id="algolia-stats"></div>
  <div id="algolia-hits"></div>
  <div id="algolia-pagination" class="algolia-pagination"></div>
</div>

      
    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/louis70109" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw">
    <link itemprop="mainEntityOfPage" href="https://nijialin.com/2020/01/27/learn-docker-with-twitch-bot/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="NiJia Lin">
      <meta itemprop="description" content="You are what you do.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¿è€…å·¥åŠ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/27/learn-docker-with-twitch-bot/" class="post-title-link" itemprop="url">Docker å­¸ç¿’ç­†è¨˜ - å°‡ Twitch Bot å®¹å™¨åŒ–</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>

              <time title="å‰µå»ºæ™‚é–“ï¼š2020-01-27 10:36:05" itemprop="dateCreated datePublished" datetime="2020-01-27T10:36:05+00:00">2020-01-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°æ–¼</span>
                <time title="ä¿®æ”¹æ™‚é–“ï¼š2023-03-22 06:17:50" itemprop="dateModified" datetime="2023-03-22T06:17:50+00:00">2023-03-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Docker/" itemprop="url" rel="index"><span itemprop="name">Docker</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ€è¿‘å‰›å¥½çœ‹åˆ°è¨±å¤š<code>EKS</code>ã€<code>GKE</code>ç›¸é—œçš„æ–‡ç« ï¼Œè¶è‘—éå¹´æ™‚åˆ»å…ˆä¾†è£œè¶³ä¸€ä¸‹ Docker é€™å€‹æ—¢ç†Ÿæ‚‰åˆé™Œç”Ÿçš„æŠ€èƒ½ ğŸ˜†ï¼Œä¹‹å¾Œå†æ¥è‘—ç ”ç©¶å¦‚ä½•ä¸²æ¥è‡³ <a target="_blank" rel="noopener" href="https://zh.wikipedia.org/zh-tw/Kubernetes">kubernetes</a> ä¸¦åŒæ™‚åˆ°é›²å¹³å°ä¸Šï¼Œæ¥ä¸‹ä¾†ä¸€èµ·ä¾†çœ‹æˆ‘å¾å»ºç«‹åˆ°å»ºç½®çš„éç¨‹ç´€éŒ„ ğŸ™‚ã€‚</p>
<p>ä»¥ä¸‹å°±ä½¿ç”¨æˆ‘çš„ side project - <a target="_blank" rel="noopener" href="https://github.com/louis70109/Twitch-Bot">Twitch-Bot</a> åšç¯„ä¾‹å›‰ï¼</p>
<blockquote>
<p>ä¸»è¦ä½¿ç”¨çš„åŠŸèƒ½ç‚º <code>node</code> ä»¥åŠ <code>mongo</code></p>
</blockquote>
<h1 id="æ–°å¢æª”æ¡ˆ"><a href="#æ–°å¢æª”æ¡ˆ" class="headerlink" title="æ–°å¢æª”æ¡ˆ"></a>æ–°å¢æª”æ¡ˆ</h1><p>é€™é‚Šæˆ‘ä½¿ç”¨ vscode çš„ <a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-docker">Docker extension</a> ä¾†å¹«åŠ©æˆ‘å¿«é€Ÿå»ºç«‹ docker ç›¸é—œçš„æª”æ¡ˆ:</p>
<ul>
<li>Dockerfile</li>
<li>docer-compose.yml</li>
<li>.dockerignore</li>
</ul>
<blockquote>
<p>é€éä»¥ä¸‹çš„ gif å¯ä»¥å¿«é€Ÿå»ºç«‹ä»¥ä¸Šä¸‰å€‹æª”æ¡ˆ</p>
</blockquote>
<p><img src="https://github.com/microsoft/vscode-docker/raw/master/resources/readme/generateFiles.gif"></p>
<p>æ“ä½œæ–¹å¼ç‚º <code>Cmd+Shift+P</code> &gt;<code>docker: add</code> &gt; <code>é¸æ“‡èªè¨€(Node)</code> &gt; <code>è¨­å®šè¼¸å‡º Port</code></p>
<h2 id="è™•ç†-dockerfile"><a href="#è™•ç†-dockerfile" class="headerlink" title="è™•ç† dockerfile"></a>è™•ç† dockerfile</h2><p>è—‰ç”± extension ä¾†å¹«æˆ‘å€‘ç”¢ç”Ÿæª”æ¡ˆç¬¬ä¸€æ­¥å°±å®Œæˆäº†ï¼Œæ¥è‘—å° Dockerfile ç¨åšä¿®æ”¹:</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> node:<span class="number">10.13</span>-alpine</span><br><span class="line"><span class="keyword">MAINTAINER</span> NiJia &lt;louis70109@gmail.com&gt;</span><br><span class="line"><span class="keyword">ENV</span> NODE_ENV production</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /app</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> [<span class="string">&quot;package.json&quot;</span>, <span class="string">&quot;package-lock.json*&quot;</span>, <span class="string">&quot;/app/&quot;</span>]</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> npm install</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> . /app/</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">5000</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">&quot;npm&quot;</span>, <span class="string">&quot;start&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>FROM: ä¾†è‡ªä»€éº¼æ˜ åƒæª”ï¼Œé€™è£¡ä½¿ç”¨é è¨­çµ¦çš„ node ç‰ˆã€‚</li>
<li>MAINTAINER: å¯«æè¿°çš„ä½ç½®ï¼Œé€™é‚Šæˆ‘æ¨™è¨»æˆ‘çš„åç¨±èˆ‡ EMailã€‚</li>
<li>ENV: ç’°å¢ƒè®Šæ•¸å¯«åœ¨é€™ï¼Œä¸éé€™å€‹å°ˆæ¡ˆæ˜¯æ”¾åœ¨ Github ä¸Šï¼Œæ‰€ä»¥æˆ‘å°±æ²’æŠŠ chatbot å¹³å°çš„å¯†é‘°æ”¾åœ¨é€™äº†ã€‚</li>
<li>WORKDIR: ç•¶å‰åœ¨ä¸€å€‹ä¹¾æ·¨çš„ç’°å¢ƒä¸‹ï¼Œè€Œä½ é æƒ³çš„å·¥ä½œè·¯ç›®éŒ„è¦å«ä»€éº¼å°±åœ¨é€™è¨­å®šï¼ŒåŒæ™‚ä¹Ÿæœƒä¸€èµ·å¹«ä½ å»ºç«‹å¥½ (æˆ‘ç”¨<code>/app</code>é€™å€‹å·¥ä½œè³‡æ–™å¤¾ç•¶ä½œç¯„ä¾‹)ã€‚</li>
<li>COPY: æŠŠæª”æ¡ˆè¤‡è£½åˆ°æƒ³è¦æ”¾çš„åœ°æ–¹ï¼Œé€™è£¡ç‚ºäº†å…ˆè®“å®¹å™¨å®‰è£å®Œç›¸ä¾å¥—ä»¶ï¼Œå› æ­¤å…ˆæŠŠ <code>package.json</code> ä»¥åŠ <code>package-lock.json</code> å…ˆè¤‡è£½é€² <code>/app/</code> é€™å€‹è³‡æ–™å¤¾å…§ã€‚</li>
<li>RUN: åŸ·è¡Œçµ‚ç«¯æ©ŸæŒ‡ä»¤ï¼Œåœ¨ä¸Šé¢æª”æ¡ˆè¤‡è£½éä¾†ä¹‹å¾Œï¼Œé€™è£¡æˆ‘å°±ä¾†å®‰è£ç›¸ä¾å¥—ä»¶åº«ã€‚</li>
<li>COPY: å®‰è£å®Œç”¢ç”Ÿ node_modules ä¹‹å¾ŒæŠŠåŸæœ¬çš„æœ‰çš„æ±è¥¿éƒ½è¤‡è£½éä¾†ã€‚<ul>
<li><code>.</code> &#x3D; ç•¶å‰ç›®éŒ„</li>
<li>&#x2F;app&#x2F; &#x3D; æ¬²è¤‡è£½å‰å¾€çš„åœ°æ–¹</li>
</ul>
</li>
<li>EXPOSE: å®¹å™¨è¦æ‰“å‡ºå»çš„ Port å‡ºå£ï¼Œåœ¨å‰é¢å‘¼å« extension æ™‚å°±å·²ç¶“è¼¸å…¥å®Œé€™æ¬„äº†ã€‚</li>
<li>CMD: å¹«æˆ‘åŸ·è¡ŒæŒ‡ä»¤ (åƒè€ƒ: <a target="_blank" rel="noopener" href="http://jenkins.readbook.tw/docker/basic/104-dockerfile/entrypoint/">CMD èˆ‡ ENTRYPOINT çš„å·®åˆ¥</a>)</li>
</ul>
<h2 id="docker-compose-yml"><a href="#docker-compose-yml" class="headerlink" title="docker-compose.yml"></a>docker-compose.yml</h2><p>é€™é‚Šæˆ‘å°‡é è¨­çš„ä¿®æ”¹ç‚º:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">twitch-bot:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">twitch-bot</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">.</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">NODE_ENV:</span> <span class="string">production</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">5000</span><span class="string">:5000</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">mongo</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">chatbot-network</span></span><br><span class="line">  <span class="attr">mongo:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mongo</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./data/db:/data/db</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">chatbot-network</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">chatbot-network:</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">bridge</span></span><br></pre></td></tr></table></figure>

<p>é¦–å…ˆå°‡<code>version</code>æ”¹æˆ <code>3</code>ï¼Œæœ‰å‘ä¸‹ç›¸å®¹çš„è©±ç•¶ç„¶å°±æ˜¯è¦ä½¿ç”¨æ–°çš„å›‰ï¼</p>
<p>æ¥è‘—æœƒå»ºç«‹å…©å€‹ container (services):</p>
<ol>
<li>twitch-bot<br><code>build</code> å¾Œé¢æ¥è‘— <code>.</code> æ˜¯æŒ‡èªªå»ºç«‹åœ¨ç•¶å‰ä½ç½®ï¼Œ<code>depends_on</code> å‰‡æ˜¯ä¾è³´å“ªå€‹ containerï¼Œæœ€å¾Œå‰‡é€é networks (<code>chatbot-network</code>) ä¾†è®“æœå‹™äº’ç›¸æºé€šã€‚</li>
<li>mongo<br>é€™é‚Šå‰‡å°±ç›´æ¥å» dockerhub è£¡é¢æŠ“ï¼Œ<code>restart</code>éµå®šæ˜¯å¿…è¦è¨­å®šï¼Œä¸ç„¶æœƒæ²’æœ‰è³‡æ–™åº« ğŸ¤£ï¼Œ<code>volumes</code>å‰‡æ˜¯è¨­å®šèªªä½ æƒ³æ˜ å°„çš„æª”æ¡ˆä½ç½®åœ¨å“ªï¼Œé€™é‚Šæˆ‘è¨­å®š<strong>ç•¶å‰ç›®éŒ„çš„&#x2F;data&#x2F;db</strong> (.&#x2F;data&#x2F;db)è£¡é¢ï¼Œå°æ‡‰åˆ°æ˜ åƒæª”è£¡é¢çš„ <strong>&#x2F;data&#x2F;db</strong> çš„ä½ç½®ï¼Œç„¶å¾Œä¸€æ¨£é€é networks (<code>chatbot-network</code>) ä¾†è®“æœå‹™æºé€šã€‚</li>
</ol>
<p>networks é€™é‚Šå°±æœ‰é»åƒä¸»æ©Ÿè¨­å®šç¶²å¡ä¸€æ¨£ï¼Œæˆ‘è¨­å®šä¸€å€‹ <code>chatbot-network</code> çš„ç¶²å¡å®ƒæ˜¯ä½¿ç”¨æ©‹æ¥(<code>bridge</code>)æ¨¡å¼ä¾†é©…å‹•(<code>driver</code>)</p>
<blockquote>
<p>é€™éƒ¨åˆ†æ˜¯åƒè€ƒ<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/69536325">çŸ¥ä¹</a>ï¼Œå°ç…§æ”¹å‡ºä¾†çš„</p>
</blockquote>
<blockquote>
<p>è£œçµ¦ç«™: ä¸€èˆ¬çœ‹åˆ° <code>5000:5000</code> æˆ–æ˜¯ <code>./data/db:/data/db</code> çš„å¯«æ³•ï¼Œå®ƒæ„æ€æ˜¯ æœ¬åœ°ç«¯ä½ç½® å°æ‡‰ã€Œ<code>:</code>ã€åˆ° å®¹å™¨çš„ä½ç½®ï¼Œåƒä¸Šè¿°æª”æ¡ˆå°±æœ‰ port ä»¥åŠ è³‡æ–™åº«ä½ç½®ï¼Œé€™é‚Šå°±æœƒå› æ‡‰æœå‹™è€Œå°æ‡‰åˆ°ä¸åŒçš„åŠŸèƒ½ã€‚</p>
</blockquote>
<h2 id="ä¿®æ”¹-dockerignore"><a href="#ä¿®æ”¹-dockerignore" class="headerlink" title="ä¿®æ”¹ .dockerignore"></a>ä¿®æ”¹ .dockerignore</h2><p>é€™é‚Šå› ç‚ºæˆ‘å¾ˆå·æ‡¶ä¸æƒ³æŠŠ<code>.env</code>è£¡çš„ç’°å¢ƒè®Šæ•¸å¯«é€²<code>dockerfile</code>ğŸ˜†ï¼Œå› æ­¤åœ¨é€™å°±æŠŠæª”æ¡ˆä¸­çš„<code>**/.env</code>æ‹”æ‰æ–¹ä¾¿åšäº‹ ğŸ¤£</p>
<h1 id="æ¸¬è©¦å®¹å™¨"><a href="#æ¸¬è©¦å®¹å™¨" class="headerlink" title="æ¸¬è©¦å®¹å™¨"></a>æ¸¬è©¦å®¹å™¨</h1><h3 id="å•Ÿå‹•"><a href="#å•Ÿå‹•" class="headerlink" title="å•Ÿå‹•"></a>å•Ÿå‹•</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>

<ul>
<li><code>-d</code> è¡¨ç¤ºè®“å®¹å™¨è·‘åœ¨èƒŒæ™¯ï¼Œå¦‚æœæ²’åŠ çš„è©±å°±æœƒåœ¨çµ‚ç«¯æ©Ÿä¸Šçœ‹åˆ°å®¹å™¨å€‘çš„è¡Œç‚ºã€‚</li>
<li>æœƒå»ºç«‹æœ¬åœ°ç«¯çš„ container imageã€‚</li>
</ul>
<h3 id="é—œé–‰"><a href="#é—œé–‰" class="headerlink" title="é—œé–‰"></a>é—œé–‰</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose down</span><br></pre></td></tr></table></figure>

<ul>
<li>è‹¥æ˜¯ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://github.com/louis70109/Twitch-Bot">Twitch-bot</a> ä¾†è©¦ç©çš„è©±ï¼Œå‰‡éœ€è¦å¤šé–‹ä¸€å€‹è¦–çª—åŸ·è¡Œ <code>npx ngrok http 5000</code> ä¾†å»ºç«‹ä¸€å€‹æš«æ™‚å«æœ‰ SSL çš„ URLã€‚</li>
</ul>
<h1 id="å»ºç½®-build"><a href="#å»ºç½®-build" class="headerlink" title="å»ºç½®(build)"></a>å»ºç½®(build)</h1><p>å¦‚æœæ˜¯æŒ‰ç…§åŸæœ¬ docker-compose.yml çš„æ‰“æ³•ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">twitch-bot:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">twitch-bot</span></span><br></pre></td></tr></table></figure>

<p>é€™æ¨£çš„è©± docker é è¨­æœƒå¹«å¿™ä¸‹ä¸€å€‹ <code>latest</code> ç‰ˆè™Ÿçš„ tagã€‚</p>
<p>å¦‚æœæ˜¯æŒ‰é€ ä»¥ä¸‹åšæ³•çš„è©±åœ¨ build å°±æœƒå¹«å¿™å»ºç«‹ <code>å¸³è™Ÿ/å®¹å™¨å</code>ï¼Œä¸¦ä¸‹ä¸€å€‹ <code>0.1</code> çš„ tag</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">twitch-bot:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">louis70109/twitch-bot:0.1</span></span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/7Ftfpeh.png"></p>
<p>æ¥ä¸‹ä¾†å°±åŸ·è¡Œ <code>docker-compose build</code> å¹«å¿™å»ºç«‹ä¸€å€‹æœ‰ç‰ˆæœ¬è™Ÿ(tag)çš„å®¹å™¨æ˜ åƒæª”(container image)ã€‚</p>
<p><img src="https://i.imgur.com/JiifOjy.png"></p>
<blockquote>
<p>è£œçµ¦ç«™:</p>
<ul>
<li>è¨˜å¾—è¦ <code>docker login</code> å“¦ï¼</li>
<li>åˆ° dockerhub æˆ–å…¶ä»–ç§æœ‰å€‰åº«å»ºç«‹ container repository</li>
</ul>
</blockquote>
<h1 id="çµç¢–"><a href="#çµç¢–" class="headerlink" title="çµç¢–"></a>çµç¢–</h1><p>è¶è‘—æ˜¥ç¯€çš„é›¶ç¢æ™‚é–“ä¾†è·Ÿé€™å€‹ç†Ÿæ‚‰é™Œç”ŸæŠ€èƒ½æ‰“å€‹æ‹›å‘¼ ğŸ˜†ï¼ŒåŒæ™‚ä¹Ÿé«”æœƒåˆ°å¤§å®¶èªªåˆ° docker å¥½ç”¨çš„åœ°æ–¹ä»¥åŠçµ¦äºˆçš„å½ˆæ€§ï¼Œä¹‹å‰éƒ½æ˜¯æœ‰éœ€è¦æ¸¬è©¦æŸäº›åŠŸèƒ½æ‰æœƒç”¨åˆ°ï¼Œå°æ–¼ <code>dockerfile</code> ä»¥åŠ <code>docker-compose.yml</code> å°±ç”šå°‘äº†è§£ï¼Œè—‰è‘—å¹´å‡ç©ºæª”ç·´ç¿’ï¼Œä¹‹å¾Œåªè¦åœ¨ç†Ÿæ‚‰ä¸€ä¸‹æ•´é«”çš„ä½¿ç”¨æ–¹æ³•æ‡‰è©²å°±èƒ½å¥½å¥½çš„ï½ç”¨å®ƒä¾†å¹«å¿™åšäº‹äº† ğŸš€ã€‚</p>
<h1 id="references"><a href="#references" class="headerlink" title="references"></a>references</h1><p><a target="_blank" rel="noopener" href="https://github.com/lmjben/cdfang-spider/blob/master/src/nodeuii/config/index.ts#L3">é€£ç·š mongo container</a><br><a target="_blank" rel="noopener" href="http://jenkins.readbook.tw/docker/basic/104-dockerfile/entrypoint/">docker CMD ä½¿ç”¨</a><br><a target="_blank" rel="noopener" href="https://docs.docker.com/compose/">Overview of Docker Compose</a><br><a target="_blank" rel="noopener" href="https://github.com/louis70109/Twitch-Bot">Twitch-Bot</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw">
    <link itemprop="mainEntityOfPage" href="https://nijialin.com/2020/01/11/corss-platform-twitch-bot/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="NiJia Lin">
      <meta itemprop="description" content="You are what you do.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¿è€…å·¥åŠ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/11/corss-platform-twitch-bot/" class="post-title-link" itemprop="url">å¦‚ä½•å»ºç«‹ä¸€å€‹è·¨å¹³å°çš„ Twitch æ©Ÿå™¨äºº</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>

              <time title="å‰µå»ºæ™‚é–“ï¼š2020-01-11 16:53:22" itemprop="dateCreated datePublished" datetime="2020-01-11T16:53:22+00:00">2020-01-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°æ–¼</span>
                <time title="ä¿®æ”¹æ™‚é–“ï¼š2023-03-22 06:17:50" itemprop="dateModified" datetime="2023-03-22T06:17:50+00:00">2023-03-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%87%89%E7%94%A8/" itemprop="url" rel="index"><span itemprop="name">æ‡‰ç”¨</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>åœ¨å»å¹´å¤§ç´„äº”æœˆçš„æ™‚å€™å¯«äº†ä¸€éš» Twitch çš„ LINE botï¼Œä¸éå¾Œä¾†ä¼¼ä¹ Twitch API æœ‰æ”¹ç‰ˆè®“æ©Ÿå™¨äººå£æ‰äº†ï¼Œæœ€è¿‘åˆæœ‰éœ€è¦ä¸€éš»æ©Ÿå™¨äººå¹«æˆ‘æŸ¥è©¢ï¼Œå°±é–‹å§‹å»ç¿»ä¸€ä¸‹ Twitch å®˜æ–¹æ–‡ä»¶ï¼Œç¢°å·§é€›åˆ°é€™å€‹ <a target="_blank" rel="noopener" href="https://dev.twitch.tv/code/">Community Resources page</a>ï¼Œçœ‹åˆ°äº†å¥½å¤šè³‡æ–™åœ¨è£¡é¢ï¼Œå°±ç´¢æ€§ä¾†é‡å¯«å›‰ï¼</p>
<blockquote>
<p>å› ç‚º Twitch package éƒ½æ˜¯ Typescriptï¼Œå› æ­¤æœ¬ç¯‡çš„ç¯„ä¾‹éƒ½æœƒæ˜¯ Typescript å“¦ï¼</p>
</blockquote>
<p>â­ï¸ æœ¬å°ˆæ¡ˆ: <a target="_blank" rel="noopener" href="https://github.com/louis70109/Twitch-Bot">Twitch-Bot</a></p>
<h1 id="åŠ å¥½å‹"><a href="#åŠ å¥½å‹" class="headerlink" title="åŠ å¥½å‹"></a>åŠ å¥½å‹</h1><ul>
<li><p>LINE</p>
<img height="200" border="0" alt="QRcode" src="https://i.imgur.com/kRcEhBN.png">
</li>
<li><p>Messenger</p>
<img height="200" border="0" alt="QRcode" src="https://i.imgur.com/93yxeiy.png"></li>
</ul>
<h1 id="æº–å‚™"><a href="#æº–å‚™" class="headerlink" title="æº–å‚™"></a>æº–å‚™</h1><ul>
<li>å¥—ä»¶<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/Yoctol/bottender">bottender</a> ç‚ºé€™æ¬¡å¯¦ä½œè·¨å¹³å°æ‰€ä½¿ç”¨çš„æ¡†æ¶</li>
<li><a target="_blank" rel="noopener" href="https://github.com/d-fischer/twitch">Twitch js</a> ä¸­æ‰¾åˆ°äº† <a target="_blank" rel="noopener" href="https://d-fischer.github.io/twitch/docs/basic-usage/getting-started.html">npm çš„å¥—ä»¶</a></li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn add twitch</span><br><span class="line"><span class="comment">// or...</span></span><br><span class="line">npm install --save twitch</span><br></pre></td></tr></table></figure>

<ul>
<li>é‡‘é‘°<ul>
<li><del>ç”³è«‹ <a target="_blank" rel="noopener" href="https://dev.twitch.tv/docs/v5#getting-a-client-id">Client ID</a></del></li>
<li>å»ºç«‹ <a target="_blank" rel="noopener" href="https://twitchapps.com/tmi/">Access Token</a></li>
</ul>
</li>
</ul>
<p>[2020&#x2F;06&#x2F;08 ä¿®æ­£] ç”³è«‹å®Œå¾Œå°‡ <code>oauth:</code> å¾Œçš„ key é€éå®˜æ–¹æ–‡ä»¶çš„ <a target="_blank" rel="noopener" href="https://dev.twitch.tv/docs/authentication/#validating-requests">Validating requests</a> æŒ‡ä»¤æ”¾å…¥ access token ä¸­å–å¾— Client_idï¼Œå¦‚ä¸‹:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -H <span class="string">&quot;Authorization: OAuth &lt;access token&gt;&quot;</span> https:<span class="regexp">//i</span>d.twitch.tv<span class="regexp">/oauth2/</span>validate</span><br></pre></td></tr></table></figure>

<p>æœ¬å°ˆæ¡ˆçš„ <code>TWITCH_CLIENT_ID</code> çš„ç’°å¢ƒè®Šæ•¸å°±æ˜¯é€™å€‹å›å‚³å€¼ä¸­çš„ <code>client_id</code>ã€‚</p>
<blockquote>
<p>é€™éƒ¨åˆ†å¯èƒ½æœƒéœ€è¦å» twitch <code>è¨­å®š -&gt; é€£çµ</code> å»ç¶å®š Oauth çš„æ¨£å­ï¼Œå†éº»ç…©å„ä½æ³¨æ„ä¸€ä¸‹ã€‚</p>
</blockquote>
<ul>
<li><p>å¹³å°</p>
<ul>
<li>éœ€è¦æœ‰å€‹ Facebook ç²‰çµ²é </li>
<li>LINE bot</li>
</ul>
</li>
<li><p>è³‡æ–™åº«</p>
<ul>
<li>MongoDB: Heroku ä¸Šç‚º <code>mLab</code></li>
</ul>
</li>
</ul>
<h1 id="å¯¦ä½œ"><a href="#å¯¦ä½œ" class="headerlink" title="å¯¦ä½œ"></a>å¯¦ä½œ</h1><p>Clone å°ˆæ¡ˆä¸‹ä¾†çœ‹ â¡ï¸ <a target="_blank" rel="noopener" href="https://github.com/louis70109/Twitch-Bot.git">https://github.com/louis70109/Twitch-Bot.git</a><br>é¦–å…ˆæŠŠ<code>.env.sample</code>æ”¹æˆ <code>.env</code>ï¼Œä¸¦å°‡å°æ‡‰çš„<code>Messenger</code>ã€<code>LINE</code>ä»¥åŠ<code>Twtich</code> key æ”¾ç½®å°æ‡‰çš„ä½ç½®</p>
<ul>
<li>Messenger ç”³è«‹æˆ‘æ˜¯åƒè€ƒ C.T. Lin çš„<a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10218682">éµäººæ–‡ç« </a></li>
<li>LINE bot ç”³è«‹åƒè€ƒ<a href="https://nijialin.com/2019/09/25/Day11-LINE-%E7%9A%84%E6%9C%8D%E5%8B%99%E9%83%BD%E7%8E%A9%E4%BA%86%EF%BC%8C%E6%80%8E%E9%BA%BC%E8%83%BD%E5%BF%98%E4%BA%86-Message-api-Bot-%E5%91%A2%EF%BC%9F-2-%E7%94%B3%E8%AB%8B%E4%B8%80%E6%AD%A5%E6%AD%A5/">æˆ‘çš„æ–‡ç« </a></li>
</ul>
<h2 id="è·¨å¹³å°"><a href="#è·¨å¹³å°" class="headerlink" title="è·¨å¹³å°"></a>è·¨å¹³å°</h2><p>è·¨å¹³å°å«æœ¬åœ°ç¸½å…±æœƒæœ‰ä¸‰å€‹:</p>
<ul>
<li>Console (æœ¬åœ°ç«¯)</li>
<li>Messenger (ç·šä¸Š)</li>
<li>LINE (ç·šä¸Š)</li>
</ul>
<p>Console æ˜¯ bottender çš„ç‰¹è‰²ä¹‹ä¸€ï¼Œå¯ä»¥åœ¨çµ‚ç«¯æ©Ÿä¸Šç›´æ¥æ¸¬è©¦ Bot çš„è¡Œç‚ºï¼Œæœƒå…ˆç”¨æ­¤æ¨¡å¼å…ˆæ¸¬è©¦è·¯ç”±çš„å›è¦†æ˜¯å¦æ­£å¸¸ã€‚</p>
<p>æ¥è‘—è¦è®“åŒæ¨£çš„ Action å¯ä»¥å°åˆ° Messenger ä»¥åŠ LINEï¼Œbottender æä¾›äº†å¯ä»¥è¨­è¨ˆé‡å°ç‰¹å®šå¹³å°è™•ç† Actionï¼Œå¦‚ä¸‹:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; platform &#125; <span class="keyword">from</span> <span class="string">&#x27;bottender/router&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>): <span class="title">Promise</span>&lt;<span class="title">void</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> router([</span><br><span class="line">    platform(<span class="string">&#x27;line&#x27;</span>, LineAction),</span><br><span class="line">    platform(<span class="string">&#x27;messenger&#x27;</span>, MessengerAction),</span><br><span class="line">  ]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€é<code>platform</code>ä¾†æŠŠç‰¹å®šå¹³å°çš„è¨Šæ¯åˆ°æ‰“å°æ‡‰çš„ Action (å¦‚ <code>LineAction</code>ã€<code>MessengerAction</code>)ï¼Œåœ¨å‚³é Action éç¨‹ä¸­æœƒæœ‰ä¸€å€‹ <code>context</code> çš„è®Šæ•¸ï¼Œè£¡é ­æœƒæœ‰åº•å±¤å¹«å¿™æ•´ç†å¥½çš„åƒæ•¸:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ConsoleContext &#123;</span><br><span class="line">  ...</span><br><span class="line">  _session: &#123;</span><br><span class="line">    _id: 5e08a45c719a1335aeae39bc,</span><br><span class="line">    id: <span class="string">&#x27;console:1&#x27;</span>,</span><br><span class="line">    _state: &#123;&#125;,</span><br><span class="line">    lastActivity: 1578743328620,</span><br><span class="line">    platform: <span class="string">&#x27;console&#x27;</span>,</span><br><span class="line">    user: &#123; id: <span class="string">&#x27;1&#x27;</span>, name: <span class="string">&#x27;you&#x27;</span>, _updatedAt: <span class="string">&#x27;2019-12-29T13:04:25.633Z&#x27;</span> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>_session</code> è£¡æœ‰å€‹ <code>platform</code> çš„åƒæ•¸ï¼Œåªè¦åˆ¤æ–·é€™åƒæ•¸å°±èƒ½çŸ¥é“è¨Šæ¯æ˜¯ä¾†è‡ªå“ªå€‹å¹³å°ï¼Œè€Œ<code>user</code>å‰‡æ˜¯è¢«æ­£è¦åŒ–å®Œå¾Œçš„ä½¿ç”¨è€…è³‡è¨Š (é€™å…©å€‹åƒæ•¸ç‚ºç›®å‰ç‚ºæ­¢æˆ‘æœ€å¸¸ç”¨çš„åƒæ•¸)</p>
<h2 id="é‡åˆ°çš„å•é¡Œ"><a href="#é‡åˆ°çš„å•é¡Œ" class="headerlink" title="é‡åˆ°çš„å•é¡Œ"></a>é‡åˆ°çš„å•é¡Œ</h2><p>ç”±æ–¼é•·æœŸä½¿ç”¨ LINE flex message çš„ button template (<a target="_blank" rel="noopener" href="https://github.com/louis70109/Twitch-Bot/blob/master/src/view/line/games.ts#L56">åƒè€ƒ</a>)ï¼Œé€™æŒ‰éˆ•äº‹ä»¶å¯ä»¥è¨­å®šæŒ‰éˆ•ä¸Šçš„æ–‡å­—ä¸¦è¨­å®šæŒ‰ä¸‹å»å›è¦†çš„å­—ä¸²ã€‚</p>
<p>è€Œ Messenger çš„æŒ‰éˆ•å°±è·Ÿäººå®¶ä¸ä¸€æ¨£äº†(<a target="_blank" rel="noopener" href="https://github.com/louis70109/Twitch-Bot/blob/master/src/view/messenger/games.ts#L22">åƒè€ƒ</a>)ï¼ä»–æ²’æœ‰ LINE çš„é€™å€‹äº‹ä»¶ï¼Œå·®ä¸å¤šçš„äº‹ä»¶åªæœ‰ <code>postback</code>ï¼Œåœ¨è·¯ç”±ä¸Šå°±å¾—ç‰¹åˆ¥è™•ç†é€™å€‹äº‹ä»¶ï¼Œç‚ºäº†è®“è·¨å¹³å°æ‰€ä½¿ç”¨çš„å…§å®¹è¦çµ±ä¸€ï¼Œåœ¨è¨Šæ¯é€² router æ™‚å°±è¦è™•ç†æ‰:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; messenger &#125; <span class="keyword">from</span> <span class="string">&#x27;bottender/router&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; withProps &#125; <span class="keyword">from</span> <span class="string">&#x27;bottender&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">LineAction</span>(<span class="params">context</span>): <span class="title">Promise</span>&lt;<span class="title">void</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> router([</span><br><span class="line">    ...</span><br><span class="line">    text(<span class="regexp">/^[f|F]ind\s*(?&lt;topic&gt;.*)$/</span>, searchGame)</span><br><span class="line">    ...</span><br><span class="line">  ]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">MessengerAction</span>(<span class="params">context</span>): <span class="title">Promise</span>&lt;<span class="title">void</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> payload = context.event?.postback?.payload;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> router([</span><br><span class="line">    ...</span><br><span class="line">    messenger.postback(</span><br><span class="line">      withProps(searchGame, &#123; <span class="attr">match</span>: &#123; <span class="attr">groups</span>: &#123; <span class="attr">topic</span>: payload &#125; &#125; &#125;)</span><br><span class="line">    )</span><br><span class="line">    ...</span><br><span class="line">  ]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€™é‚Šæ‰¾åˆ° <a target="_blank" rel="noopener" href="https://bottender.js.org/docs/channel-messenger-routing">bottender å®˜æ–¹æ–‡ä»¶</a>ä¸­å‡½å¼å°ˆé–€åœ¨è™•ç† Messenger çš„ postback äº‹ä»¶ï¼Œä¸¦æ­é…<code>withProps</code>ä¾†å¹«å¿™æŠŠåƒæ•¸ postback æ”¶åˆ°çš„åƒæ•¸å‚³é€²å°æ‡‰ Actionã€‚</p>
<p>ç‚ºä»€éº¼æœƒè¦æŠŠå‚³å…¥çš„åƒæ•¸è¨­å®šæˆå·¢ç‹€ object -&gt; <code>&#123; match: &#123; groups: &#123; topic: payload &#125;&#125;&#125;</code>ï¼Œå› ç‚ºåœ¨è¨­è¨ˆåˆæœŸæœ¬æ˜¯å¸Œæœ›é€²ä¾†çš„å…§å®¹éƒ½æ˜¯å¾<code>text</code>å‚³é€²ä¾†ï¼Œæ„æŒ‡éƒ½æ˜¯é€éä½¿ç”¨è€…æ‰“å­—é€²ä¾†ï¼Œé‚£ bottender éƒ½æœƒé€éå‚³ match åƒæ•¸é€²ä¾†(<a target="_blank" rel="noopener" href="https://github.com/louis70109/Twitch-Bot/blob/master/src/controller/twitches/searchGame.ts#L7">åƒè€ƒ</a>)ï¼Œè€Œè§£æå®Œ Messenger çš„ postback æ™‚ä¹Ÿå¾—éœ€è¦ç¬¦åˆé€™æ¨£çš„æ ¼å¼ï¼Œå› æ­¤å°±é€™æ¨£è¨­è¨ˆï¼Œç•¶ç„¶å¦‚æœæœ‰æ›´å¥½çš„è¨­è¨ˆæ­¡è¿é€ PR ğŸ‰ã€‚</p>
<h1 id="Chatbot-MVC"><a href="#Chatbot-MVC" class="headerlink" title="Chatbot MVC"></a>Chatbot MVC</h1><h2 id="Model"><a href="#Model" class="headerlink" title="Model"></a><a target="_blank" rel="noopener" href="https://github.com/louis70109/Twitch-Bot/blob/master/src/model">Model</a></h2><ul>
<li><code>Twitch</code>: é€™è£¡æˆ‘è¨­å®š userId ç‚º uniqueï¼Œé‡å°æ¯å€‹å¹³å°æœ‰è‡ªå·±çš„ idï¼Œæ¯å€‹å¹³å°éƒ½å¯ä»¥ç¶å®š twitch å¸³è™Ÿï¼Œé€²è€Œå»åšç›¸é—œæ“ä½œã€‚</li>
<li><code>Game</code>: å› ç‚º Twitch å¥—ä»¶é€™éƒ¨åˆ†æ˜¯<code>read only</code>ï¼Œå› æ­¤æˆ‘å°±åœ¨å»ºç«‹ä¸€å€‹ä¸€æ¨£çš„ model ä¾†è™•ç†ã€‚</li>
</ul>
<blockquote>
<p>Twich id æ˜¯å…¨é–‹æ”¾çš„ï¼Œåªè¦çŸ¥é“å…¶ä»–ä½¿ç”¨è€…çš„ id å°±å¯ä»¥æŸ¥è©¢æŸäº›åŠŸèƒ½(<a target="_blank" rel="noopener" href="https://dev.twitch.tv/docs/v5">åƒè€ƒ</a>)ï¼Œé€™é‚Šæˆ‘å°±ä½¿ç”¨æŸ¥è©¢<code>è¿½éš¨</code>çš„åŠŸèƒ½ã€‚</p>
</blockquote>
<h2 id="View"><a href="#View" class="headerlink" title="View"></a><a target="_blank" rel="noopener" href="https://github.com/louis70109/Twitch-Bot/tree/master/src/view">View</a></h2><p>é€™è£¡è¨­è¨ˆä¸Šåªè¦å±¬æ–¼é€å‡ºè¨Šæ¯ç›¸é—œçš„æ¨£æ¿(<code>Flex</code>ã€<code>Genetic</code>ã€<code>Text</code>)æ¥æ”¾åœ¨æ­¤ã€‚</p>
<ul>
<li>common: <code>ä½œè€…è³‡è¨Š(author)</code> ä»¥åŠ <code>å¹«åŠ©æˆ‘(help)</code> çš„ç›¸é—œ</li>
<li>LINE: Flex message ç›¸é—œæ¨£æ¿</li>
<li>messenger: Genetic template ç›¸é—œæ¨£æ¿</li>
</ul>
<h2 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a><a target="_blank" rel="noopener" href="https://github.com/louis70109/Twitch-Bot/tree/master/src/controller">Controller</a></h2><p>åœ¨å‘¼å« twitch api å‡ºä¾†çš„è³‡æ–™æœ‰æ™‚å€™æœƒå¤§æ–¼ LINE ä»¥åŠ Messenger çš„æ¨£æ¿é™åˆ¶ï¼Œå› æ­¤æ‰€æœ‰è¨ˆç®—æœå‹™éƒ½æœƒæ”¾åœ¨é€™é‚Šï¼Œå‰›å¥½å°±æ­ä¸Š Controller çš„å°æ‡‰åŠŸèƒ½ã€‚</p>
<ul>
<li>common: è² è²¬å°‡ controller è™•ç†å®Œçš„å…§å®¹é€è‡³ <code>View</code></li>
<li>twitch: è™•ç†<code>æœ€å¤šäººçœ‹å¾—éŠæˆ²</code>ä»¥åŠ<code>æœå°‹æŒ‡å®šéŠæˆ²</code></li>
<li>user: è™•ç†<code>ç¶å®š</code>ä»¥åŠ<code>æŸ¥è©¢è¿½éš¨</code></li>
</ul>
<h1 id="çµè«–"><a href="#çµè«–" class="headerlink" title="çµè«–"></a>çµè«–</h1><p>åŸºæœ¬ä¸Šåšåˆ°é€™å¦‚æœä¹‹å¾Œè¦æ“´å¢<code>Telegram</code>æˆ–æ˜¯<code>Slack</code>éƒ½å¯ä»¥å¾ˆå¿«é€Ÿæ“´å……ï¼Œåªè¦æŠŠç›¸å°åªè¦æŠŠç›¸å°çš„ Action åŠ åœ¨ <code>App.ts</code> å°±è¡Œäº†ã€‚</p>
<p>è—‰ç”±é€™æ¬¡ä¹Ÿå­¸åˆ°è·¨å¹³å°çš„æ©Ÿå™¨äººçœŸçš„ä¸å¥½åšï¼Œæ¯å®¶å» ç‰Œçš„è¡Œç‚ºéƒ½ä¸ä¸€æ¨£ï¼Œæ‰€å¹¸ bottender å·²ç¶“è™•ç†å¤§éƒ¨åˆ†å¹³å°é–“çš„å•é¡Œï¼Œæ¥è‘—æˆ‘å€‘åªéœ€è¦å°‡æ¬²è¼¸å‡ºçš„å…§å®¹è™•ç†å¥½å°æ‡‰æ¡†æ¶æ‰€æä¾›çš„åŠŸèƒ½å»å›å‚³çµ¦ä½¿ç”¨è€…ï¼Œè®“æ•´é«”çš„é–‹ç™¼å¯ä»¥æ›´å°ˆæ³¨åœ¨é–‹ç™¼åŠŸèƒ½ä¸Šä¸¦æ›´æœ‰å½ˆæ€§ã€‚</p>
<p>æ­¡è¿å„ä½å¹«æˆ‘æŒ‰å€‹æ˜Ÿæ˜Ÿ â­ï¸â¡ï¸ <a target="_blank" rel="noopener" href="https://github.com/louis70109/Twitch-Bot">https://github.com/louis70109/Twitch-Bot</a><br>ä¹Ÿä¸€èµ·æ”¯æŒé–‹æºå°ˆæ¡ˆ <code>bottender</code>â­ï¸â¡ï¸ <a target="_blank" rel="noopener" href="https://github.com/Yoctol/bottender">https://github.com/Yoctol/bottender</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw">
    <link itemprop="mainEntityOfPage" href="https://nijialin.com/2020/01/10/2020-01-10-%E7%9A%84mur-mur/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="NiJia Lin">
      <meta itemprop="description" content="You are what you do.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¿è€…å·¥åŠ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/10/2020-01-10-%E7%9A%84mur-mur/" class="post-title-link" itemprop="url">2020/01/10 çš„mur mur</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>

              <time title="å‰µå»ºæ™‚é–“ï¼š2020-01-10 13:19:08" itemprop="dateCreated datePublished" datetime="2020-01-10T13:19:08+00:00">2020-01-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°æ–¼</span>
                <time title="ä¿®æ”¹æ™‚é–“ï¼š2023-03-22 06:04:15" itemprop="dateModified" datetime="2023-03-22T06:04:15+00:00">2023-03-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%97%A5%E8%A8%98/" itemprop="url" rel="index"><span itemprop="name">æ—¥è¨˜</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h1><p>å…¶å¯¦æœ¬ä¾†ä¹Ÿæ²’æ‰“ç®—åœ¨æˆ‘çš„éƒ¨è½æ ¼ç™¼é€™ç¨® mur mur æ–‡ï¼Œä½†ç¸½è¦ºå¾—åœ¨å‰å¾€æ›´é«˜å±¤ç´šæ™‚ç¸½æ˜¯éœ€è¦æ€è€ƒä¸€ä¸‹è‡ªå·±åœ¨åšçš„äº‹æƒ…æ˜¯ä¸æ˜¯å°çš„ï¼Œæ¥ä¸‹ä¾†å°±åœ¨æè¿°ä¸€ä¸‹å¥½äº† ğŸ˜†</p>
<h1 id="Body"><a href="#Body" class="headerlink" title="Body"></a>Body</h1><p>å°±åœ¨ä»Šå¤©è·Ÿè‘—å¤§å®¶ä¸€èµ·çœ‹<code>GitHub</code> å…¨çƒæœ€å¤§è»Ÿé«”å·¥ç¨‹å¸«äº¤å‹å¹³å°çš„æ’åç¶²ç«™(å¯æƒœæˆ‘è²¢ç»é‚„ä¸å¤ å¤šæ²’æ’é€²å» ğŸ˜­)<br><a target="_blank" rel="noopener" href="https://commits.top/taiwan.html">https://commits.top/taiwan.html</a></p>
<p>çœ‹è‘—å„ä½ç‚ºå¤§ç¥çš„æ’è¡Œæ¦œä¸­é»ä¾†é»å»å°±ç¢°å·§é»åˆ°äº†é€™ç¯‡æ–‡ç« <br><a target="_blank" rel="noopener" href="https://jaceju.net/be-a-senior-engineer/">https://jaceju.net/be-a-senior-engineer/</a></p>
<p>è€Œæœ€è¿‘ä¹Ÿæ˜¯ä¸€ç›´åœ¨æƒ³é€™å•é¡Œ</p>
<blockquote>
<p>ã€Œå¦‚ä½•æ‰æœ‰è³‡æ ¼ç¨±ç‚ºè³‡æ·±å·¥ç¨‹å¸«ã€</p>
</blockquote>
<p>ä»¥å‰ç¸½æƒ³è‘—åªè¦å·¥ä½œä¸€é™£å­ä¹‹å¾Œæˆ‘å°±å¯ä»¥è™Ÿç¨±æˆ‘æ˜¯ senior<br>ä½†å·¥ä½œå¾Œåˆè·‘ç¤¾ç¾¤ç™¼ç¾èªè­˜çš„ä¸€å€‹æ¯”ä¸€å€‹é‚„å¼·éƒ½è¦ºå¾—é›¢ä»–å€‘å¥½é å•Š ğŸ‘€</p>
<p>ä½†çœ‹å®Œé€™ç¯‡ä¹‹å¾Œä¹Ÿå¾ˆæ…¶å¹¸è‡ªå·±èº«é‚Šæœ‰é‚£éº¼å¤šè²´äººåœ¨å¹«åŠ©æˆ‘å¾€è³‡æ·±å·¥ç¨‹å¸«çš„æ–¹å‘åœ¨èµ°<br>ä½†ä¸ç®¡è·ç¨±æ˜¯ä»€éº¼æˆ‘èªç‚ºã€Œè‡ªæˆ‘åçœã€æ˜¯ä¸€ä»¶å¾ˆé‡è¦çš„äº‹<br>å°åˆ°æ–‡ä»¶éŒ¯å­—ã€å¤§åˆ°ç³»çµ± runtime çˆ†ç‚¸ ğŸ›<br>éƒ½å¾—å¾ä¸­å»æ‰¾åˆ°éŒ¯èª¤å»æ‰¾å‡ºè®“è‡ªå·±æˆé•·çš„å¥‘æ©Ÿ</p>
<p>é€™æ˜¯æœ€è¿‘åšäº†ä¸€å€‹é¡ä¼¼ AWS IoT Job çš„ mur mur ğŸ¤£<br>è®“è‡ªå·±æˆç‚ºæ›´å¥½çš„è»Ÿé«”å·¥ç¨‹å¸«ï½</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw">
    <link itemprop="mainEntityOfPage" href="https://nijialin.com/2020/01/07/Python-operator/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="NiJia Lin">
      <meta itemprop="description" content="You are what you do.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¿è€…å·¥åŠ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/07/Python-operator/" class="post-title-link" itemprop="url">Python - operator</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>

              <time title="å‰µå»ºæ™‚é–“ï¼š2020-01-07 15:12:22" itemprop="dateCreated datePublished" datetime="2020-01-07T15:12:22+00:00">2020-01-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°æ–¼</span>
                <time title="ä¿®æ”¹æ™‚é–“ï¼š2023-03-22 06:17:50" itemprop="dateModified" datetime="2023-03-22T06:17:50+00:00">2023-03-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ€è¿‘åœ¨å¯¦ä½œéœ€è¦è™•ç†å­—ä¸²ä¸¦ä¸”æŠŠå®ƒæ”¹æˆçœŸå¯¦çš„<code>åˆ¤æ–·å¼</code>ï¼Œæ‰¾ google çš„éç¨‹ä¸­æ‰¾åˆ°äº†<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/1740726/turn-string-into-operator">ä¸€ç¯‡è§£ç­”</a>ï¼Œç•¶ä¸­å‰›å¥½çœ‹åˆ° <a target="_blank" rel="noopener" href="https://docs.python.org/3/library/operator.html">Operator</a> é€™å€‹å¥—ä»¶ï¼Œä»¥ä¸‹å°±ç”¨ä¸€äº›ç¯„ä¾‹ä¾†ç¤ºç¯„ï½</p>
<h1 id="å¯¦ä½œ"><a href="#å¯¦ä½œ" class="headerlink" title="å¯¦ä½œ"></a>å¯¦ä½œ</h1><p>è™•ç†çš„ç¯„ä¾‹: <code>1=1AND2&lt;5OR8&gt;9</code></p>
<p>å¯ä»¥ä½¿ç”¨<code>re</code>æŠŠå­—ä¸²è™•ç†æˆé™£åˆ—</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">re.split(<span class="string">&quot;AND|OR&quot;</span>, payload)</span><br><span class="line"><span class="comment"># -&gt; [1=1, 2&lt;5, 8&gt;9]</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ¥è‘—å†ä½¿ç”¨<code>è¿´åœˆ</code>+åŒæ¨£çš„æ–¹æ³•å»è™•ç†æ‰<code>=</code>ã€<code>&gt;</code>ã€<code>&lt;</code></p>
</blockquote>
<p>åœ¨è™•ç†å®Œä¹‹å¾Œå°±å¯ä»¥æ‰¾åˆ°æ‰€æœ‰çš„ <code>key</code> ä»¥åŠ <code>value</code> çš„é™£åˆ—</p>
<p>æ¥è‘—å°±æ˜¯è¦æŠŠ <code>AND</code>ã€<code>OR</code> æ‰¾å‡ºä¾†å­˜ä¸‹ä¾†ï¼Œé€™é‚Šæˆ‘æœƒæœƒä½¿ç”¨<code>split(&#39;AND&#39;, 1)</code>åªåˆ‡ç¬¬ä¸€å€‹æ‰¾åˆ°çš„<code>AND</code>å­—ä¸²ï¼Œå› ç‚ºåƒæ˜¯ SQL Where å­å¥çš„åŠŸèƒ½è¦ä¸€å€‹ä¸€å€‹è™•ç†æ‰è¡Œï¼Œå¦å‰‡æœ€å¾Œåˆ¤æ–·æœƒå‡ºå•é¡Œã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> re.search(<span class="string">&#x27;(AND)|(OR)&#x27;</span>, payload) <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">    result = payload.split(<span class="string">&#x27;AND&#x27;</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">if</span> result[<span class="number">0</span>] <span class="keyword">and</span> ... <span class="comment"># åˆ¤æ–· AND å­—ä¸²</span></span><br><span class="line">    result = payload.split(<span class="string">&#x27;OR&#x27;</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">if</span> result[<span class="number">0</span>] <span class="keyword">and</span> ... <span class="comment"># åˆ¤æ–· OR å­—ä¸²</span></span><br></pre></td></tr></table></figure>

<p>æ¥è‘—å†åˆ‡å®Œä¹‹å¾Œæœƒæ‹¿åˆ°<code>operator_list</code>çŸ¥é“è£¡é¢æœ‰å“ªäº›é‹ç®—å­çš„é™£åˆ—ï¼Œä»¥åŸæœ¬çš„è³‡æ–™ä¾†èªªå¯ä»¥ç”¨è¿´åœˆå»è™•ç†ï¼Œé€™é‚Šæˆ‘å°±ç”¨ç°¡å–®çš„ç¯„ä¾‹ä¾†è¡¨ç¤º<code>operator</code>å¯ä»¥è™•ç†çš„æ±è¥¿ã€‚</p>
<p>åƒæ˜¯<code>operator</code>é™¤äº†å¯ä»¥åˆ¤æ–·ç´”æ•¸å­—ä»¥åŠç´”å­—ä¸²ä»¥å¤–ï¼Œä¹Ÿå¯åˆ¤æ–·<code>è‹±æ–‡</code>+<code>æ•¸å­—</code>çš„çµ„åˆã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">operator_list = [<span class="string">&#x27;&gt;&#x27;</span>, <span class="string">&#x27;&lt;&#x27;</span>, <span class="string">&#x27;=&#x27;</span>]</span><br><span class="line"><span class="keyword">if</span> operator_list[<span class="number">0</span>] == <span class="string">&#x27;&gt;&#x27;</span>:</span><br><span class="line">    result = operator.gt(<span class="number">2</span>, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">if</span> operator_list[<span class="number">1</span>] == <span class="string">&#x27;&lt;&#x27;</span>:</span><br><span class="line">    result = operator.lt(<span class="string">&#x27;z01&#x27;</span>, <span class="string">&#x27;z99&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> operator_list[<span class="number">2</span>] == <span class="string">&#x27;=&#x27;</span>:</span><br><span class="line">    result = operator.eq(<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;A&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ä»¥ä¸Šæ–¹æ³•å¯ä»¥æ¯”å°é‹ç®—å­ï¼Œè€Œä½¿ç”¨ä»¥ä¸‹æ–¹æ³•å‰‡å¯ä»¥æ¯”å°<code>AND</code>ä»¥åŠ<code>OR</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ex = [<span class="string">&#x27;AND&#x27;</span>, <span class="string">&#x27;OR&#x27;</span>]</span><br><span class="line"><span class="keyword">if</span> ex[<span class="number">0</span>] == <span class="string">&#x27;AND&#x27;</span>:</span><br><span class="line">    result = operator.and_(<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"><span class="keyword">if</span> ex[<span class="number">1</span>] == <span class="string">&#x27;OR&#x27;</span>:</span><br><span class="line">    result = operator.or_(<span class="number">1</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<h1 id="çµè«–"><a href="#çµè«–" class="headerlink" title="çµè«–"></a>çµè«–</h1><p>é€é <code>operator</code> é€™å€‹å‡½ç¤ºåº«è®“æˆ‘è™•ç†<code>é‹ç®—å­å€‘</code>å¯ä»¥å°‘å¾ˆå¤šäº‹ï¼Œè—‰æ­¤ç´€éŒ„ä¸€ä¸‹å·¥ä½œä¸Šä½¿é‡åˆ°çš„ä¸€äº›æ–¹æ³•ä»¥åŠå•é¡Œï¼Œæœ€é©šè¨çš„å°±æ˜¯å¯ä»¥æ¯”å°<code>è‹±æ–‡</code>+<code>ä¸­æ–‡</code>çš„åˆ¤æ–·å¼ï¼Œä»¥ä¸€äº›éŸŒé«”çš„æœ¬ç‰ˆè³‡è¨Šä¾†èªªä»–å€‘æœƒæ“æœ‰é€™æ¨£çš„çµ„åˆï¼Œåœ¨ä¸Šå‚³ä¹‹å¾Œè¦æ¯”å°æ™‚ç”¨é€™æ¨£çš„æ–¹æ³•å°±å¾ˆæ–¹ä¾¿ï¼Œè‹¥æœ‰ä»€éº¼å•é¡Œæ­¡è¿ç•™è¨€çµ¦æˆ‘ ğŸ˜Š</p>
<h1 id="åƒè€ƒ"><a href="#åƒè€ƒ" class="headerlink" title="åƒè€ƒ"></a>åƒè€ƒ</h1><ul>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/1740726/turn-string-into-operator">stackoverflow</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.python.org/3/library/operator.html">operator</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw">
    <link itemprop="mainEntityOfPage" href="https://nijialin.com/2019/12/24/Twich-chatroom-IRC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="NiJia Lin">
      <meta itemprop="description" content="You are what you do.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¿è€…å·¥åŠ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/24/Twich-chatroom-IRC/" class="post-title-link" itemprop="url">é€é IRC èˆ‡ Twitch èŠå¤©å®¤é€£çµäº’å‹•</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>

              <time title="å‰µå»ºæ™‚é–“ï¼š2019-12-24 14:09:27" itemprop="dateCreated datePublished" datetime="2019-12-24T14:09:27+00:00">2019-12-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°æ–¼</span>
                <time title="ä¿®æ”¹æ™‚é–“ï¼š2023-03-22 06:17:50" itemprop="dateModified" datetime="2023-03-22T06:17:50+00:00">2023-03-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%87%89%E7%94%A8/" itemprop="url" rel="index"><span itemprop="name">æ‡‰ç”¨</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ç‚ºä»€éº¼æœƒæƒ³ç©é€™å€‹å‘¢ï¼Œå› ç‚ºä¹‹å‰ä¸²äº†ä¸€éš»ä»‹æ¥ Twitch API çš„èŠå¤©æ©Ÿå™¨äººï¼Œä¸éæœ€è¿‘å› ç‚º API ä¼¼ä¹å·²ç¶“ç¿»æ–°äº†ï¼Œæ‰€ä»¥é‚£éš»æ©Ÿå™¨äººæš«æ™‚æ­»äº¡äº† ğŸ˜†ï¼Œä½†æ˜¯èŠå¤©æ©Ÿå™¨äººä¸é™å®šåªæœ‰åœ¨ facebookã€LINE é€šè¨Šè»Ÿé«”ä¸Šï¼Œå› æ­¤å°±å¯«äº†é€™ç¯‡æ–‡ç« ä¾†ç´€éŒ„ä¸€ä¸‹ä½¿ç”¨éç¨‹ã€‚</p>
<h1 id="æ–‡ä»¶-amp-ç”³è«‹å¯†é‘°"><a href="#æ–‡ä»¶-amp-ç”³è«‹å¯†é‘°" class="headerlink" title="æ–‡ä»¶ &amp; ç”³è«‹å¯†é‘°"></a>æ–‡ä»¶ &amp; ç”³è«‹å¯†é‘°</h1><p>Twitch Chatbot IRC <a target="_blank" rel="noopener" href="https://dev.twitch.tv/docs/irc/">å®˜æ–¹æ–‡ä»¶</a></p>
<ul>
<li>GitHub<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/tmijs/tmi.js">é€£çµ</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/tmijs/docs">æ–‡ä»¶</a></li>
</ul>
</li>
</ul>
<blockquote>
<p>è¦ä½¿ç”¨çš„æœ‹å‹åœ¨ google æ™‚å¯èƒ½æœƒæ‰¾åˆ°å¦ä¸€å¥—ï¼Œä¸éä»–ä¹Ÿèªªè«‹å¤§å®¶ä¾†ç”¨ <code>tmi.js</code> äº†ï¼¸ï¼¤</p>
</blockquote>
<p>é¦–å…ˆè¦å…ˆç”³è«‹ä¸€å€‹ <code>OAUTH</code> çš„å¯†é‘°ï¼Œç¶²å€<a target="_blank" rel="noopener" href="https://twitchapps.com/tmi/">åœ¨é€™é‚Š</a></p>
<h1 id="å¥—ä»¶å®‰è£"><a href="#å¥—ä»¶å®‰è£" class="headerlink" title="å¥—ä»¶å®‰è£"></a>å¥—ä»¶å®‰è£</h1><p>é€é<code>npm</code>å®‰è£<code>tmi.js</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i tmi.js</span><br></pre></td></tr></table></figure>

<h1 id="IRC-é€šè¨Š"><a href="#IRC-é€šè¨Š" class="headerlink" title="IRC é€šè¨Š"></a>IRC é€šè¨Š</h1><p>æ¥è‘—éœ€è¦å¯«ä¸€å€‹è…³æœ¬é€é<code>IRC</code>çš„æ–¹æ³•ä¾†èˆ‡ Twitch çš„èŠå¤©å®¤é€£çµï¼š</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/IRC">IRC</a>ï¼ˆInternet Relay Chatï¼‰æ˜¯ä¸€å€‹ä½æ–¼æ‡‰ç”¨å±¤çš„å”å®šã€‚å…¶ä¸»è¦ç”¨æ–¼ç¾¤é«”èŠå¤©ï¼Œä½†åŒæ¨£ä¹Ÿå¯ä»¥ç”¨æ–¼å€‹äººå°å€‹äººçš„èŠå¤©ã€‚</p>
</blockquote>
<h2 id="æ–°å¢-bot-js"><a href="#æ–°å¢-bot-js" class="headerlink" title="æ–°å¢ bot.js"></a>æ–°å¢ <code>bot.js</code></h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> tmi = <span class="built_in">require</span>(<span class="string">&#x27;tmi.js&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> client = <span class="keyword">new</span> tmi.Client(&#123;</span><br><span class="line">  options: &#123; <span class="attr">debug</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">  connection: &#123;</span><br><span class="line">    reconnect: <span class="literal">true</span>,</span><br><span class="line">    secure: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  identity: &#123;</span><br><span class="line">    username: <span class="string">&#x27;YOUR_NAME&#x27;</span>,</span><br><span class="line">    password: <span class="string">&#x27;oauth:YOUR_KEY&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  channels: [<span class="string">&#x27;yuniko0720&#x27;</span>], <span class="comment">// æƒ³åŠ å…¥çš„èŠå¤©å®¤</span></span><br><span class="line">&#125;);</span><br><span class="line">client.connect();</span><br><span class="line">client.on(<span class="string">&#x27;message&#x27;</span>, <span class="function">(<span class="params">channel, tags, message, self</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (self) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">if</span> (message.toLowerCase() === <span class="string">&#x27;87&#x27;</span>) &#123;</span><br><span class="line">    client.say(channel, <span class="string">`@<span class="subst">$&#123;tags.username&#125;</span>, ä½ æ˜¯ç¬¬ N å€‹èªª 87!`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="è¨­å®šæª”"><a href="#è¨­å®šæª”" class="headerlink" title="è¨­å®šæª”"></a>è¨­å®šæª”</h2><ul>
<li><code>username</code>: è¨­å®šä½ çš„ä½¿ç”¨è€…åç¨±</li>
<li><code>password</code>: ç”³è«‹çš„ oauth æ”¾åœ¨é€™é‚Šï¼Œæ ¼å¼çš†æ˜¯<code>oauth:XXXXX</code></li>
<li><code>channels</code>: ä¸€èˆ¬æœƒé€²å…¥è‡ªå·±çš„é »é“ï¼Œç•¶ç„¶ä¹Ÿå¯ä»¥å»å…¶ä»–é »é“</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">identity: &#123;</span><br><span class="line">    username: <span class="string">&#x27;YOUR_NAME&#x27;</span>,</span><br><span class="line">    password: <span class="string">&#x27;oauth:YOUR_KEY&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  channels: [<span class="string">&#x27;yuniko0720&#x27;</span>],</span><br></pre></td></tr></table></figure>

<h2 id="é€£çµèŠå¤©å®¤"><a href="#é€£çµèŠå¤©å®¤" class="headerlink" title="é€£çµèŠå¤©å®¤"></a>é€£çµèŠå¤©å®¤</h2><p>é€™éƒ¨åˆ†å‰‡æ˜¯é–‹å§‹ç›£è½èŠå¤©å®¤çš„å…§å®¹ï¼Œæ‰€æœ‰çš„ç¯„ä¾‹é€£çµ<a target="_blank" rel="noopener" href="https://github.com/tmijs/docs/tree/gh-pages/_posts/v1.4.2">çš†åœ¨æ­¤</a>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">client.on(<span class="string">&#x27;message&#x27;</span>, <span class="function">(<span class="params">channel, tags, message, self</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (self) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">if</span> (message.toLowerCase() === <span class="string">&#x27;87&#x27;</span>) &#123;</span><br><span class="line">    client.say(channel, <span class="string">`@<span class="subst">$&#123;tags.username&#125;</span>, ä½ æ˜¯ç¬¬ N å€‹èªª 87!`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="æˆæœ"><a href="#æˆæœ" class="headerlink" title="æˆæœ"></a>æˆæœ</h1><p>åŸ·è¡Œ<code>node bot.js</code>æœƒçœ‹åˆ°ä»¥ä¸‹çš„ç•«é¢</p>
<p><img src="https://i.imgur.com/01aiJVw.png"></p>
<p>å…¶å¯¦é€™æ¨£ç›£è½çœ‹èµ·ä¾†çœŸçš„æ˜¯è®“æˆ‘é€™å€‹å®…å¿ƒå™´ç™¼ ğŸš€ğŸš€ï¼Œå¯ä»¥é€é<code>IRC</code>æ”¶åˆ°èŠå¤©å®¤è¨Šæ¯å¾Œçœ‹å¾ŒçºŒè¦æ€éº¼è™•ç†ï¼Œåƒæœ‰äº›å¯¦æ³ä¸»èˆ‡è§€çœ¾çš„äº’å‹•å¯èƒ½æ˜¯è¼¸å…¥<code>+1</code>é€™æ¨£çš„æ–‡å­—ä¾†ç²å¾—çè³(æŠ‘æˆ–æ˜¯äº’ç½µ ğŸ¤£)ï¼Œåœ¨å¾ˆå¤šæƒ…å¢ƒä¸‹é€™æ¨£ç”¨æœƒè®“è§€çœ¾é™¤äº†è·Ÿå¯¦æ³ä¸»äº’å‹•ä»¥å¤–é‚„æœ‰å€‹å°è±¡èƒ½ç© ğŸ‘¾ã€‚</p>
<h1 id="çµè«–"><a href="#çµè«–" class="headerlink" title="çµè«–"></a>çµè«–</h1><p>è€Œåœ¨é€™æ¨£ç›£è½ä¸‹è‹¥äººæ•¸å¾ˆé«˜ä¹‹å¾Œå…¶å¯¦å¯ä»¥æ”¶é›†åˆ°æ›´å¤šçš„è³‡è¨Šå»åšåˆ©ç”¨ï¼Œä¹Ÿè¨±æƒ³æ˜¯é–‹å•Ÿ<code>è¨‚é–±è€…æ¨¡å¼</code>å¾Œè®“è¨‚é–±è€…è¼¸å…¥ç‰¹å®šæ–‡å­—å¾Œå°‡è³‡è¨Šå‚³å…¥<code>Google sheet</code>ä¹‹é¡çš„è³‡æ–™è¡¨ï¼Œåœ¨åšæŠ½çç­‰æ´»å‹•æ€§è³ªçš„å…§å®¹ï¼Œå°æ•´å€‹éŠæˆ²å¯¦æ³å…§å®¹è¡ŒéŠ·éƒ½æœƒæ˜¯æ»¿å¥½èˆ‡è§€çœ¾äº’å‹•çš„æ–¹å¼ï½</p>
<p>å¤§æ¦‚å°±ç©åˆ°é€™é‚Šäº†ï¼Œä¸‹æ¬¡æƒ³åˆ°ä»€éº¼æ‡‰ç”¨å†ä¾†èªª ğŸ˜†</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw">
    <link itemprop="mainEntityOfPage" href="https://nijialin.com/2019/12/22/chatbot-meetup-2019Q4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="NiJia Lin">
      <meta itemprop="description" content="You are what you do.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¿è€…å·¥åŠ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/22/chatbot-meetup-2019Q4/" class="post-title-link" itemprop="url">Chatbot meetup #14 èˆ‡ #15 å°èšå¿ƒå¾—</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>

              <time title="å‰µå»ºæ™‚é–“ï¼š2019-12-22 12:48:54" itemprop="dateCreated datePublished" datetime="2019-12-22T12:48:54+00:00">2019-12-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°æ–¼</span>
                <time title="ä¿®æ”¹æ™‚é–“ï¼š2023-03-22 06:17:50" itemprop="dateModified" datetime="2023-03-22T06:17:50+00:00">2023-03-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A0%94%E8%A8%8E%E6%9C%83/" itemprop="url" rel="index"><span itemprop="name">ç ”è¨æœƒ</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img src="https://i.imgur.com/9sLr17Z.png"></p>
<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ NiJia</p>
<p>ä¸‹åŠå¹´åº¦è¾›è‹¦ä¾†åƒåŠ å°èšçš„å„ä½äº†ï¼Œæœ€å¾Œä¸€å­£å ´åœ°ä¸€ç›´è®Šæ›´ï¼Œå› ç‚ºæ¯æ¬¡å°èšéƒ½æœ‰ç†±æƒ…çš„å¤¥ä¼´æä¾›å ´åœ°çµ¦å°èšï¼Œä¹Ÿä¸€èµ·å°‹æ‰¾æœ€é©åˆå„ä½çš„ä¸€å€‹å ´åœ°ï¼Œè‹¥é€ æˆå›°æ“¾å°å¼Ÿæ·±æ„ŸæŠ±æ­‰ &lt;(_ _)&gt;</p>
<p>2019 å¹´åº¦æ´»å‹•è³‡è¨Šè«‹åƒè€ƒ â¡ï¸<a target="_blank" rel="noopener" href="https://github.com/Chatbot-Taiwan/meetups/blob/master/taipei/2019.md">Chatbot Taiwan GitHub</a></p>
<h1 id="å°èšæ´»å‹•-amp-ç°¡å ±é€£çµ"><a href="#å°èšæ´»å‹•-amp-ç°¡å ±é€£çµ" class="headerlink" title="å°èšæ´»å‹• &amp; ç°¡å ±é€£çµ"></a>å°èšæ´»å‹• &amp; ç°¡å ±é€£çµ</h1><h2 id="meetups-14"><a href="#meetups-14" class="headerlink" title="meetups 14"></a><a target="_blank" rel="noopener" href="https://chatbots.kktix.cc/events/meetup-014">meetups 14</a></h2><ul>
<li><a target="_blank" rel="noopener" href="https://hackmd.io/@chatbot-tw/meetups-014">åƒè€ƒå…±ç­†</a></li>
</ul>
<table>
<thead>
<tr>
<th>Topic</th>
<th>Speaker</th>
<th>Link</th>
</tr>
</thead>
<tbody><tr>
<td>Whatâ€™s new in LIFF v2 and TECHPULSE 2019 preview</td>
<td>Evan Lin</td>
<td><a target="_blank" rel="noopener" href="https://speakerdeck.com/line_developers_tw/whats-new-in-liff-v2-and-techpulse-2019-preview?slide=2&fbclid=IwAR1pS22ELVfWptEmvIwn7G35uGeefPO1g6ncMfPsD0ssr7IBB6T7Q_Hbc4Q">link</a></td>
</tr>
<tr>
<td>Bottender ä¸€è·¯èµ°ä¾†</td>
<td>æ—æ‰¿æ¾¤(C.T Lin)</td>
<td><a target="_blank" rel="noopener" href="https://drive.google.com/file/d/1yz38IWwolgv8AQPxIpuQBfNzSaKjGQVU/view?fbclid=IwAR2IHRd6ESvCnOCu-hleFvM-K1RTMT4l65ShoWB852XWhQ-wUj_ikegmnzw">link</a></td>
</tr>
<tr>
<td>å¦‚ä½•ä½¿ç”¨ kamigo å¿«é€Ÿé–‹ç™¼ LINE bot</td>
<td>æ—å®¶ç…œ(NiJia Lin)</td>
<td><a target="_blank" rel="noopener" href="https://www.slideshare.net/JiaYuLin6/kamigo-reviews-20191127-198374007?fbclid=IwAR1bkzmaOO5_tOBxNf9G5WVLboghJp6Mbl1G5wkOxPLk7RzOm707dNefd_M">link</a></td>
</tr>
</tbody></table>
<h2 id="å¿ƒå¾—"><a href="#å¿ƒå¾—" class="headerlink" title="å¿ƒå¾—"></a>å¿ƒå¾—</h2><p>ç•¶æ™‚ LIFF v1 åªèƒ½é€é Deep link çš„æ–¹å¼è®“å¾ˆå¤šéœ€è¦ Web view çš„å‹•ç·šè¨­è¨ˆä¸Šå¢åŠ äº†è¨±å¤šå›°æ“¾ï¼Œè€Œåœ¨ v2 ä¸Šç·šå¾Œæ”¹å–„äº†é€™æ–¹é¢çš„å•é¡Œï¼Œä¸”ä¹Ÿå°å¤–å…¬å¸ƒæ”¯æ´ Query string è®“é–‹ç™¼è€…å¯ä»¥å¸¶åƒæ•¸é€²å»(é›–ç„¶ä¹‹å‰å°±å·²ç¶“åœ¨å·ç”¨äº† ğŸ˜†)ï¼Œé›–ç„¶å¾ˆä¸å¹¸çš„å› ç‚º iOS çš„æ”¿ç­–å•é¡Œå°è‡´ Scan QR code çš„åŠŸèƒ½åœ¨æ¥ä¸‹ä¾†çš„ç‰ˆæœ¬ç¡¬ç”Ÿç”Ÿè¢«æ‹”é™¤ï¼Œä½†æ•´é«”ä¸‹ä¾†å…¶å¯¦ LIFF v2 å°æ–¼åœ¨ LINE ä¸Šé–‹ç™¼åŠŸèƒ½çš„æœ‹å‹å¯ä»¥æ›´æœ‰å½ˆæ€§çš„å»æ‡‰ç”¨äº†ã€‚</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://developer.apple.com/app-store/review/guidelines/#third-party-software">iOS æ”¿ç­–å•é¡Œåƒè€ƒ</a></p>
</blockquote>
<p><img src="https://i.imgur.com/BtY1sLS.jpg"></p>
<p>Bottender æ˜¯åœ¨æŸæ¬¡å°èšèŠåˆ°æ™‚æ‰çŸ¥é“åŸä¾†æœ‰é€™éº¼é…·çš„é–‹æºå°ˆæ¡ˆï¼Œæˆ‘è¦ºå¾—æœ€ç‰¹åˆ¥çš„é™¤äº†å¯ä»¥æ”¯æ´å¤šå¹³å°ä¹‹å¤–ï¼Œå°±æ˜¯ <code>console</code> æ¨¡å¼äº†ï¼Œåƒæˆ‘æœ€è¿‘åšçš„ <a target="_blank" rel="noopener" href="https://github.com/louis70109/Taiwan-ABL-games">ABL å°ç£éšŠè³½ç¨‹æ©Ÿå™¨äºº</a>å°±åªä½¿ç”¨åˆ°ç´”æ–‡å­—çš„åŠŸèƒ½ï¼Œåœ¨<code>console</code>æ¨¡å¼ä¸‹å¾ˆå¿«é€Ÿçš„å°±æŠŠåŠŸèƒ½å¼„å¥½ï¼Œéƒ¨ç½²æ™‚åªè¦æŠŠç›¸é—œ <code>Key</code> æ”¾é€²å»åŠŸèƒ½å°±å®Œæˆäº†ï¼Œé€™éƒ¨åˆ†æ˜¯çœŸçš„å¾ˆé©šè‰· ğŸ˜†<br>ä¸Šé€±å»åƒåŠ  GDG Hackthon æ™‚ä»‹ç´¹çµ¦å…¶ä»–å¯«å‰ç«¯çš„æœ‹å‹ä½¿ç”¨ï¼Œå¾ä¾†æ²’å¯«éå¾Œç«¯çš„ä»–å€‘ä¹Ÿè¦ºå¾—ä½¿ç”¨ä¸ŠçœŸçš„å¾ˆå¿«å°±ä¸Šæ‰‹ï¼Œæ‰€ä»¥æœ‰å¯«<code>Javascript</code>çš„æœ‹å‹ä¸å¦¨åƒè€ƒè©¦è©¦å›‰ï¼<br><img src="https://i.imgur.com/xMpRkLM.png"></p>
<p>ç•¶åˆå› ç‚ºè¨“ç·´æ™‚æ²’æœ‰ä¸€å€‹å¯ä»¥å¹«æˆ‘å„²å­˜è¨˜éŒ„çš„åœ°æ–¹ï¼Œå› æ­¤æƒ³åˆ°æƒ³åš LINE bot ä¾†è§£æ±ºæˆ‘çš„å•é¡Œï¼Œä½†åŒæ™‚æˆ‘åˆä¸å–œæ­¡è™•ç†ä¸€å¤§å † JSON çš„å•é¡Œï¼Œå› æ­¤é¸ç”¨ <a target="_blank" rel="noopener" href="https://github.com/etrex/kamigo">Kamigo</a> ä½œç‚ºæˆ‘é–‹ç™¼ bot çš„æ¡†æ¶ï¼Œé™¤äº†æ¡†æ¶å¹«å¿™è½‰æ‰“è«‹æ±‚è½‰åˆ°å°æ‡‰çš„<code>controller</code>è®“æˆ‘ä¸ç”¨å¯«ä¸€å †<code>if</code> <code>else</code>ä»¥å¤–ï¼Œæœ€å¥½ç”¨çš„åŠŸèƒ½å°±æ˜¯ <code>Kamiflex</code> äº†ï¼Œç•¶æˆ‘å€‘åœ¨ <a target="_blank" rel="noopener" href="https://developers.line.biz/console/fx/">Flex Message Simulator</a> å¼„äº†ä¸€å † JSON å‡ºä¾†æ™‚ï¼ŒåŒæ™‚æˆ‘å€‘éœ€è¦å¾è³‡æ–™åº«æ‹‰è³‡æ–™å‡ºä¾†çµ„è£ç”¢ç”Ÿå¤§é‡çš„ JSONï¼Œåœ¨çµ„è£æ™‚ç¨‹å¼ç¢¼æœƒå¾ˆé«’äº‚ï¼Œæ‰€ä»¥ä½¿ç”¨ Kamiflex ä¾†å¹«å¿™è½‰è­¯è®“æˆ‘åœ¨å¯« Flex message æ™‚å¯ä»¥æ›´åƒåœ¨å¯« Ruby codeï¼Œè®“æ•´å€‹ JSON å¯èƒ½å¹¾åƒè¡Œç¬é–“è¢«æ¿ƒç¸®æˆ 100 è¡Œæ™‚é€™æ®µ Flex message åœ¨ç¶­è­·æ™‚ä¹Ÿèƒ½æ›´å¥½çš„ç¶­è­·ã€‚<br><img src="https://i.imgur.com/4boRPgr.png"></p>
<h3 id="Kamigo-æµç¨‹"><a href="#Kamigo-æµç¨‹" class="headerlink" title="Kamigo æµç¨‹"></a>Kamigo æµç¨‹</h3><div id="sequence-0"></div>

<ul>
<li><a target="_blank" rel="noopener" href="https://chatbots.kktix.cc/events/meetup-015">meetups 15</a><ul>
<li><a target="_blank" rel="noopener" href="https://hackmd.io/@chatbot-tw/meetups-015">åƒè€ƒå…±ç­†</a></li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>Topic</th>
<th>Speaker</th>
<th>Link</th>
</tr>
</thead>
<tbody><tr>
<td>LINE Push &#x2F; Message é–‹ç™¼ç¶“é©—è«‡</td>
<td>Caesar Chi</td>
<td></td>
</tr>
<tr>
<td>é‚Šç·£äººæ•‘æ˜Ÿï¼ç”¨ Laravel æ‰“é€ ç§äººå®šè£½çš„èŠå¤©æ©Ÿå™¨äºº</td>
<td>æå°èƒ–</td>
<td><a target="_blank" rel="noopener" href="https://docs.google.com/presentation/d/1ImrH_2IziPceVnfHrTYTf8g3AivxQ3s4sNHkSQf6aBY/edit#slide=id.p">link</a></td>
</tr>
<tr>
<td>Chatbot builder</td>
<td>Penny Sun</td>
<td><a target="_blank" rel="noopener" href="https://speakerdeck.com/line_developers_tw/automl-in-clova-chatbot-builder-framework?slide=56">link</a></td>
</tr>
</tbody></table>
<h2 id="å¿ƒå¾—-1"><a href="#å¿ƒå¾—-1" class="headerlink" title="å¿ƒå¾—"></a>å¿ƒå¾—</h2><p>æˆ‘å¹³æ™‚å°±æœ‰åœ¨çœ‹ä¸€äº›ç¤¾ç¾¤è¡ŒéŠ·æœ‹å‹åˆ†äº«ä»–å€‘æ˜¯å¦‚ä½•å°è¡Œç‚ºä¸‹æ¨™ç±¤<code>tag</code>ä»¥åŠç™¼æ”¾å°æ‡‰å…§å®¹çµ¦ä½¿ç”¨è€…é€²è€Œæå‡è³¼è²·åŠ›ï¼Œåœ¨ Caesar å¤§å¤§çš„å¿«é€Ÿäº†è§£åˆ°é€™äº›å•†æ¥­è¡Œç‚ºèƒŒå¾Œçš„é–‹ç™¼ç¶“é©—ç‚ºä½•ï¼Œå¾è¨­è¨ˆåˆ°å¤§é‡æ¨é€æ‰€éœ€æ³¨æ„çš„å•é¡Œä»¥åŠæœå‹™å™¨ä¹‹é–“çš„æºé€šå•é¡Œâ€¦åœ¨é€™æ¬¡çš„è­°ç¨‹ä¸­è®“æˆ‘å­¸åˆ°å¾ˆå¤šä»˜è²»å…§å®¹æ‰æœƒè½åˆ°çš„é¡Œæï¼Œè®“æˆ‘å°æ–¼ Push message é€™ä»¶äº‹æƒ…çš„åšæ³•èˆ‡æ€è·¯åˆé‡æ–°è¢«æ•™è‚²äº†ä¸€æ¬¡ ğŸ˜†<br><img src="https://i.imgur.com/GqSiAmh.jpg"></p>
<p>é€™æ¬¡è¦è«‹åˆ°ä¸€å€‹æœˆæœ‰ä¸€åŠæ™‚é–“éƒ½åœ¨åƒåŠ å°èšçš„å°èšç‹å°èƒ–ä¾†ç‚ºå„ä½åˆ†äº«å¦‚ä½•ç”¨<code>Laravel</code>åšä¸€éš»å°ˆç‚ºè‡ªå·±å®¢è£½åŒ–çš„æ©Ÿå™¨äººï¼Œé›–ç„¶ Live demo éç¨‹ä¸­äº†é­”å’’ï¼Œå¥½éšªå¾Œä¾†ä¹Ÿè§£æ±ºçš„ä¸€äº› live demo æ‰æœƒé‡åˆ°çš„å•é¡Œ ğŸ¤£ï¼Œç¸½ä¹‹è‹¥æœ‰ä½¿ç”¨ php çš„æœ‹å‹æ­¡è¿åƒè€ƒç°¡å ±å“¦ï½<br><img src="https://i.imgur.com/z2WgJvD.jpg"></p>
<p>æœ€å¾Œç”± LINE çš„è³‡æ–™å·¥ç¨‹å¸«-Penny ç‚ºæˆ‘å€‘å¸¶ä¾†åœ¨ LINE techpulse ä¸Šçš„è­°ç¨‹ï¼Œå¾ä»‹ç´¹ä¸­ NLU éƒ¨åˆ†çœ‹èµ·ä¾†åŠŸèƒ½æœƒåƒæ˜¯ <code>Dialogflow</code> ä¸€æ¨£ï¼Œè€Œåœ¨å…¶ä»–çš„éƒ¨åˆ†å‰‡æ˜¯æä¾›ä¸€å€‹ä»‹é¢è®“ä½¿ç”¨è€…å¯ä»¥æ›´å¿«é€Ÿçš„åœ¨ç¶²é ä¸Šè¨­å®šè‡ªå·±æƒ³è¦çš„æ©Ÿå™¨äººæ¨£å¼ï¼Œåªæ˜¯ç›®å‰åŠŸèƒ½åªæä¾›çµ¦åˆä½œçš„å•†å®¶ï¼ŒæœŸå¾…æœªä¾† release æ™‚çš„æ•ˆç›Š ğŸš€<br><img src="https://i.imgur.com/rdAzlEu.jpg"></p>
<blockquote>
<p>å®˜æ–¹å¸³è™Ÿå·²ç¶“æœ‰å¥—ç”¨å›‰ï¼æƒ³æ”¶åˆ°å•²ä¸€æ‰‹è³‡è¨Šæˆ–æ˜¯æƒ³ç©ç©çš„æœ‹å‹å¯ä»¥æƒæåŠ å…¥ ğŸ‘¾</p>
</blockquote>
<p><img src="https://qr-official.line.me/L/9AirZgJAgb.png"></p>
<blockquote>
<p>æ‰€æœ‰å°èšè³‡è¨Šæ¥æ”¶è—åœ¨ -&gt; <a target="_blank" rel="noopener" href="https://github.com/Chatbot-Taiwan/meetups">Chatbot Taiwan GitHub</a> ä¸Šå“¦ï¼</p>
</blockquote>
<h1 id="é–ƒé›»ç§€"><a href="#é–ƒé›»ç§€" class="headerlink" title="é–ƒé›»ç§€"></a>é–ƒé›»ç§€</h1><h2 id="14"><a href="#14" class="headerlink" title="14"></a>14</h2><table>
<thead>
<tr>
<th>Speaker</th>
<th>Topic</th>
<th>Link</th>
</tr>
</thead>
<tbody><tr>
<td>é™³ä½³æ–°</td>
<td>LINE Beaconï¼Œæ•¸ä½å°è¦½çš„å°å¹«æ‰‹ï¼</td>
<td></td>
</tr>
<tr>
<td>Eric</td>
<td>Flex box, ä¸€èµ·æ”¶é›†åˆ†äº« Flex message</td>
<td><a target="_blank" rel="noopener" href="https://github.com/eric0324/flex-box">link</a></td>
</tr>
<tr>
<td>å¾éƒæ¶µ</td>
<td>é£Ÿè¾²é£½å¯å¤¢</td>
<td></td>
</tr>
<tr>
<td>éƒ­ä½³ç”¯</td>
<td>åˆé¤éšŠé•·</td>
<td><a target="_blank" rel="noopener" href="https://github.com/Yoctol/leader-of-lunch">link</a></td>
</tr>
</tbody></table>
<h2 id="15"><a href="#15" class="headerlink" title="15"></a>15</h2><table>
<thead>
<tr>
<th>Speaker</th>
<th>Topic</th>
<th>Link</th>
</tr>
</thead>
<tbody><tr>
<td>Calvin</td>
<td>LINE Beaconï¼Œæ•¸ä½å°è¦½çš„å°å¹«æ‰‹ï¼</td>
<td><a target="_blank" rel="noopener" href="https://docs.google.com/presentation/d/1a8Yaf_315mb4u8BcIvs6TqyNYkDiRR-T7mxNAnOuQCE/edit">link</a></td>
</tr>
<tr>
<td>JT</td>
<td>ChatOps &amp; Rasa</td>
<td><a target="_blank" rel="noopener" href="https://slides.com/jimting/chatops_and_rasa#/">link</a></td>
</tr>
<tr>
<td>NiJia</td>
<td>ABL å°ç£éšŠæŸ¥è©¢æ©Ÿå™¨äºº</td>
<td><a target="_blank" rel="noopener" href="https://github.com/louis70109/Taiwan-ABL-games">link</a></td>
</tr>
<tr>
<td>éƒ­ä½³ç”¯</td>
<td>Bottender &amp; Kamigo ä»‹ç´¹</td>
<td><a target="_blank" rel="noopener" href="https://github.com/Yoctol/bottender">link1</a>ã€<a target="_blank" rel="noopener" href="https://github.com/etrex/kamigo">link2</a></td>
</tr>
</tbody></table>
<h2 id="çŸ­è©•"><a href="#çŸ­è©•" class="headerlink" title="çŸ­è©•"></a>çŸ­è©•</h2><p>é™¤äº†å…§å®¹è±å¯Œçš„ä¸»è­°ç¨‹å¤–ï¼Œé–ƒé›»ç§€å°±æ˜¯åœ¨æ¯å€‹ç¤¾ç¾¤æœ€ç‰¹åˆ¥çš„éƒ¨åˆ†äº†ï¼Œå¾æ¯æ¬¡çš„é–ƒé›»ç§€ä¸­éƒ½è®“æˆ‘å°æ–¼ side project çš„æƒ³æ³•åˆé‡æ–°è¢«å®šç¾©äº†ä¸€ç•ªï¼Œå¸¸å¸¸æœƒçœ‹åˆ°å¾ˆå¤šä¸åŒçš„æ‡‰ç”¨æƒ…å¢ƒä»¥åŠç‰¹æ®Šçš„ç”¨æ³•ï¼Œæ­¡è¿å¤§å®¶è¸´èºå ±åé–ƒé›»ç§€ä¾†äº’ç›¸äº¤æµï¼Œå¤šæ–¹äº¤æµæˆ–è¨±æœ‰æ©Ÿæœƒè¹¦å‡ºä¸ä¸€æ¨£çš„æƒ³æ³•ä¸¦è®“æ©Ÿå™¨äººçš„å…¶ä»–ç”¨é€” ğŸ˜</p>
<h1 id="çµè«–"><a href="#çµè«–" class="headerlink" title="çµè«–"></a>çµè«–</h1><p>åœ¨èˆ‰è¾¦æ¯æ¬¡çš„å°èšæ´»å‹•éƒ½å¸Œæœ›å¯ä»¥çµ¦æ¯å€‹ä¾†çš„æœ‹å‹æœ€è±å¯Œçš„å…§å®¹ï¼Œä»¥åŠæä¾› Lighting talk çš„èˆå°è®“æœ‰ä½œå“çš„æœ‹å‹å¯ä»¥ä¸Šä¾†åˆ†äº«ï¼Œè€Œæœ€è¿‘æœ‰èˆ‡å…¶ä»–ç¤¾ç¾¤çš„æœ‹å‹èŠåˆ°ï¼Œç™¼ç¾ä¼¼ä¹æŠŠè­°ç¨‹å¡å¤ªç·Šï¼Œå°è‡´å½±éŸ¿åˆ°æœƒçœ¾èˆ‡è¬›è€…äº¤æµä»¥åŠå›å®¶ä¼‘æ¯çš„æ™‚é–“ï¼Œæ‰€ä»¥ä¹‹å¾Œçš„å°èšæ”¹å–„é€™å€‹ç‹€æ³ä¸¦èª¿æ•´æ™‚é–“ï¼Œå†éº»ç…©å¤§å®¶å¤šæ”¯æŒ <a target="_blank" rel="noopener" href="https://www.facebook.com/groups/chatbot.tw">Chatbot Taiwan</a>ğŸš€ğŸš€ğŸš€</p>
<script src="https://cdnjs.cloudflare.com/ajax/libs/webfont/1.6.27/webfontloader.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/snap.svg/0.4.1/snap.svg-min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/js-sequence-diagrams/1.0.6/sequence-diagram-min.js"></script><textarea id="sequence-0-code" style="display: none">User->LINE: message
LINE->Route: webhook
Route->Kamigo: event notify
Kamigo->Controller: send params
Controller->View: send DB data
View->Kamigo: generator flex template
Kamigo->Route: send template
Route->LINE: response
LINE->User: reply</textarea><textarea id="sequence-0-options" style="display: none">{"theme":"simple"}</textarea><script>  var code = document.getElementById("sequence-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("sequence-0-options").value));  var diagram = Diagram.parse(code);  diagram.drawSVG("sequence-0", options);</script>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw">
    <link itemprop="mainEntityOfPage" href="https://nijialin.com/2019/12/10/Bottender-x-Dialogflow-x-LINE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="NiJia Lin">
      <meta itemprop="description" content="You are what you do.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¿è€…å·¥åŠ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/10/Bottender-x-Dialogflow-x-LINE/" class="post-title-link" itemprop="url">Bottender x Dialogflow x LINE</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>

              <time title="å‰µå»ºæ™‚é–“ï¼š2019-12-10 15:18:31" itemprop="dateCreated datePublished" datetime="2019-12-10T15:18:31+00:00">2019-12-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°æ–¼</span>
                <time title="ä¿®æ”¹æ™‚é–“ï¼š2023-03-22 06:17:50" itemprop="dateModified" datetime="2023-03-22T06:17:50+00:00">2023-03-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Chatbot/" itemprop="url" rel="index"><span itemprop="name">Chatbot</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ Chatbot Taiwan çš„ NiJiaï¼Œæœ€è¿‘æˆ‘å€‘ Github é–‹å¼µå›‰ï¼Œæƒ³æ‰¾ä¹‹å‰æ¼”è¬›çš„ç´€éŒ„éƒ½æœƒåœ¨æ­¤å“¦ï¼</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/Chatbot-Taiwan/meetups">Github</a></li>
<li><a target="_blank" rel="noopener" href="https://www.facebook.com/groups/chatbot.tw/">Facebook</a></li>
<li><a target="_blank" rel="noopener" href="https://chatbots.kktix.cc/">KKTIX</a></li>
</ul>
<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>äº‹æƒ…æ˜¯é€™æ¨£çš„ï¼Œæœ¬é€±æœ« 12&#x2F;13-12&#x2F;15 æˆ‘è¦å» <a target="_blank" rel="noopener" href="https://www.meetup.com/GDGTaichung/events/266686542/">GDG Taichung Hackthon Party</a> ä¸Šç•¶å°å¸«ï¼Œç¤™æ–¼æˆ‘å¯¦åœ¨æƒ³ä¸å‡ºæœ‰å€‹é¡Œç›®å¯ä»¥åˆ†äº«çµ¦å…¶ä»–åŒå¥½ï¼Œç¢°å·§ä¹‹å‰è·Ÿé Wolke å¤§å¤§çš„ Dialogflow + LINE bot å·¥ä½œåŠï¼Œæ†¶èµ·ç•¶æ™‚çš„æ˜åªšé¢¨æ™¯ï¼Œæ¥è‘—å‰é™£å­å¯«éµäººè³½ä¹Ÿæœ‰è·Ÿåˆ° C.T Lin å¤§å¤§å¯«çš„<a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/users/20103630/ironman/2798">ä½¿ç”¨ Modern Web æŠ€è¡“ä¾†æ‰“é€  Chat App</a>ï¼Œå¦‚æ­¤ä¸€ä¾†æˆ‘å°±ä¹¾è„†æŠŠé€™å…©å€‹æ±è¥¿åˆåœ¨ä¸€èµ·å¼„å€‹æ±è¥¿ï¼</p>
<p>åˆé€™éº¼å‰›å¥½çš„æˆ‘æœ€è¿‘ç˜‹ç‹‚çœ‹ ABL çƒè³½(æ”¯æŒæœ¬åœŸçƒéšŠï¼)ï¼Œå‰›å¥½é€±æœ«ä¹Ÿæ²’äº‹ï¼Œå°±é †æ‰‹æŠŠå®ƒåšå‡ºä¾†å•¦~æœ‰åœ¨çœ‹çƒè³½çš„æœ‹å‹åˆ¥éŒ¯éé€™éš»æ©Ÿå™¨äººå›‰ï¼ä»–å¯ä»¥å‘Šè¨´ä½ ä¸‹ä¸€å ´æ¯”è³½æ˜¯å“ªæ™‚å€™ï½<br><img src="https://i.imgur.com/RTmyJPr.png"></p>
<p>ä»¥ä¸‹è¨˜éŒ„è‘—æˆ‘è¸©é›·çš„éç¨‹ ğŸ¤£ï¼Œè©³ç´° bottender ä½¿ç”¨æ‰‹å†Šé‚„æ˜¯åƒè€ƒ -&gt; <a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/users/20103630/ironman/2798">ä½¿ç”¨ Modern Web æŠ€è¡“ä¾†æ‰“é€  Chat App</a></p>
<p>æœ¬ç¯‡æ–‡ç« çš„ç¨‹å¼ç¢¼å·²ç¶“é–‹æºå›‰ <a target="_blank" rel="noopener" href="https://github.com/louis70109/Taiwan-ABL-games">Taiwan-ABL-Games</a></p>
<h1 id="å»ºç«‹å°ˆæ¡ˆ"><a href="#å»ºç«‹å°ˆæ¡ˆ" class="headerlink" title="å»ºç«‹å°ˆæ¡ˆ"></a>å»ºç«‹å°ˆæ¡ˆ</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx create-bottender-app taiwan-abl-games</span><br></pre></td></tr></table></figure>

<p>æ¥è‘—æœƒçœ‹åˆ°ä»¥ä¸‹çš„ç•«é¢ï¼Œbottender å¾ˆè²¼å¿ƒçš„åˆ—å‡ºä¸€äº›å¤§å®¶å¹³å¸¸æ¯”è¼ƒæœƒä½¿ç”¨çš„å¹³å°ï¼Œé€™é‚Šæˆ‘å€‘å…ˆé¸æ“‡ LINEï¼Œå¾ŒçºŒæœƒå†å‘Šè¨´å¤§å®¶å¦‚ä½•å¢åŠ å…¶ä»–å¹³å°é¸é …ã€‚<br><img src="https://i.imgur.com/k12ig2m.png"></p>
<h1 id="Dialogflow-æ³¨æ„äº‹é …èˆ‡ä¸²æ¥"><a href="#Dialogflow-æ³¨æ„äº‹é …èˆ‡ä¸²æ¥" class="headerlink" title="Dialogflow æ³¨æ„äº‹é …èˆ‡ä¸²æ¥"></a>Dialogflow æ³¨æ„äº‹é …èˆ‡ä¸²æ¥</h1><p>é€™é‚Šä¸€å®šæ˜¯è¦åƒè€ƒä¸»è¦é–‹ç™¼è€…æ‰€å¯«çš„æ–‡ç« å•Š -&gt; <a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10226833">Day25</a><br>å¤§è‡´ä¸Šå‰µå»ºæœå‹™çš„éç¨‹å·®ä¸å¤šï¼Œé€™å€‹éƒ¨åˆ†å°±ç°¡å–®å¸¶éæ¯”è¼ƒé‡è¦çš„éƒ¨åˆ†ã€‚</p>
<blockquote>
<p>åœ¨è™•ç†æ„åœ–éƒ¨åˆ†æœ‰å€‹å°æ’‡æ­¥ï¼Œè‹¥é¼ æ¨™å¾å·¦é‚Šåˆ°å³é‚Šï¼Œåˆ°ç¬¬äºŒå€‹æ™‚æœƒæŠŠç¬¬ä¸€å€‹æ„åœ–è¦†è“‹æ‰ï¼Œé€™é‚Šæˆ‘éƒ½æ˜¯å¾å³é‚Šåˆ°å·¦é‚Šä¸€å€‹ä¸€å€‹é¸ï¼Œæ‰ä¸æœƒé‡åˆ°è¦†è“‹çš„å•é¡Œã€‚</p>
</blockquote>
<p><img src="https://i.imgur.com/HtZ1OWd.png"></p>
<p>æ¥ä¸‹ä¾†å†è™•ç† Dialogflow API çš„å•é¡Œï¼ŒDay 25 æ–‡ç« ä¸­æ‰€æåˆ°çš„åœ°æ–¹ Google UI ä¼¼ä¹æœ‰æ›ä½ç½®ï¼Œæˆ‘æ‰¾åˆ°çš„ä½ç½®åœ¨æ­¤ -&gt; <a target="_blank" rel="noopener" href="https://cloud.google.com/docs/authentication/production#obtaining_and_providing_service_account_credentials_manually">URL</a><br><img src="https://i.imgur.com/5HJ3uL7.png"></p>
<p>å¾é é¢çš„è—è‰²æŒ‰éˆ•(å»ºç«‹æœå‹™é‡‘é‘°)å¾Œæœƒé‡åˆ°ä¸‹åœ–ç•«é¢ï¼Œç¬¬ä¸€å€‹ç´…è‰²æ¡†æ¡†éœ€è¦æ³¨æ„æ˜¯ä¸æ˜¯å‰›å‰›å»ºç«‹çš„ Dialogflow çš„ agentã€‚<br>è€Œç¬¬äºŒå€‹ä¸‹æ‹‰å¼é¸å–®é¸æ“‡ <code>Dialogflow Integrations</code>ï¼Œä¸‹é¢å‰‡é¸æ“‡ <code>JSON</code> æ ¼å¼ã€‚<br><img src="https://i.imgur.com/vBRfIgp.png"></p>
<blockquote>
<p>åœ¨ä¸€é–‹å§‹å»ºç«‹å®Œä¹‹å¾Œè‹¥æ˜¯è¦å›ä¾†ç®¡ç†çš„è©±ï¼Œç›´æ¥åˆ° GCP çš„<a target="_blank" rel="noopener" href="https://console.cloud.google.com/home/dashboard">ä¸»æ§å°</a>å·¦å´çš„<code>API &amp; Services</code>çš„<code>Cedemtials</code>ä¾†ç®¡ç†é‡‘é‘°ã€‚</p>
</blockquote>
<p><img src="https://i.imgur.com/IEGyogB.png"></p>
<p>æŠŠä¸‹è¼‰çš„æª”æ¡ˆæ”¾åœ¨ä¸»ç›®éŒ„ä¸‹ï¼Œæ¥è‘—è¦åœ¨<code>.env</code>ä¸‹æ–°å¢ä»¥ä¸‹å…©å€‹ keyï¼Œ<code>GOOGLE_APPLICATION_CREDENTIALS</code>å‰‡éœ€è¦æ‰“ä¸Š<code>çµ•å°è·¯å¾‘</code>ï¼Œå¾Œé¢å†éƒ¨ç½²æœƒå†è§£é‡‹é€™æ®µã€‚</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GOOGLE_APPLICATION_CREDENTIALS=<span class="regexp">/Users/</span>...<span class="regexp">/taiwan-abl-games/</span>YOUR_KEY.json</span><br><span class="line">GOOGLE_APPLICATION_PROJECT_ID=taiwan-abl-games-mpmomf</span><br></pre></td></tr></table></figure>

<p><code>PROJECT_ID</code>è¦å» <a target="_blank" rel="noopener" href="https://console.cloud.google.com/home/dashboard">GCP ä¸»æ§å°</a>æŸ¥è©¢ã€‚<br><img src="https://i.imgur.com/GSHaMTK.png"></p>
<h1 id="å¯¦ä½œ"><a href="#å¯¦ä½œ" class="headerlink" title="å¯¦ä½œ"></a>å¯¦ä½œ</h1><p>é€™é‚Šå°±å…ˆè¤‡è£½åŸä½œè€…çš„ code ä¸¦ç¨åšä¿®æ”¹è‡³ &#x2F;src&#x2F;index.jsï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dialogflow = <span class="built_in">require</span>(<span class="string">&#x27;dialogflow&#x27;</span>); <span class="comment">// è¨˜å¾—å®‰è£</span></span><br><span class="line"><span class="keyword">const</span> &#123; format &#125; = <span class="built_in">require</span>(<span class="string">&#x27;date-fns&#x27;</span>); <span class="comment">// è¨˜å¾—å®‰è£</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> PROJECT_ID = process.env.GOOGLE_APPLICATION_PROJECT_ID;</span><br><span class="line"><span class="keyword">const</span> sessionClient = <span class="keyword">new</span> dialogflow.SessionsClient();</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (context.event.isText) &#123;</span><br><span class="line">    <span class="keyword">const</span> sessionPath = sessionClient.sessionPath(</span><br><span class="line">      PROJECT_ID,</span><br><span class="line">      context.session.id</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> request = &#123;</span><br><span class="line">      session: sessionPath,</span><br><span class="line">      queryInput: &#123;</span><br><span class="line">        text: &#123;</span><br><span class="line">          text: context.event.text,</span><br><span class="line">          languageCode: <span class="string">&#x27;zh-tw&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      queryParams: &#123;</span><br><span class="line">        timeZone: <span class="string">&#x27;Asia/Taipei&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€é dialogflow åµæ¸¬æ„åœ–</span></span><br><span class="line">    <span class="keyword">const</span> responses = <span class="keyword">await</span> sessionClient.detectIntent(request);</span><br><span class="line">    <span class="keyword">const</span> &#123; intent, parameters &#125; = responses[<span class="number">0</span>].queryResult;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (intent.displayName === <span class="string">&#x27;dreamer-next-game&#x27;</span>) &#123;</span><br><span class="line">      <span class="comment">//...YOUR CONTEXT</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">await</span> context.sendText(<span class="string">&#x27;æ‚¨è¼¸å…¥çš„å…§å®¹æˆ‘ä¸æ‡‚å“¦~ğŸ€&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>è—‰ç”±ä¸Šè¿°ç¨‹å¼ç¢¼æœƒç™¼ç¾è—‰ç”± Dialogflow åˆ¤æ–·å‡ºä¾†çš„ intent åˆ°åº•æ˜¯è¦å¡«å…¥ä»€éº¼ï¼Ÿintent é¡¯ç¤ºçš„å­—ä¸²å°±å¦‚ä¸‹åœ–æ‰€ç¤ºï¼Œæˆ‘å€‘åœ¨ Dialogflow è£¡å»ºç«‹çš„ Intent çš„åå­—å°±æ˜¯æœ€å¾Œ API æœƒå›å‚³çµ¦æˆ‘å€‘çš„åˆ¤æ–·å­—ä¸²ï¼Œé€™é‚Šå°±æ­£è¦åŒ–ä¸€ä¸‹è‡ªå·±æ‰€è¦æä¾›çš„æ„åœ–å§ï¼<br><img src="https://i.imgur.com/sEsEep8.png"></p>
<h2 id="bottender-config-js"><a href="#bottender-config-js" class="headerlink" title="bottender.config.js"></a>bottender.config.js</h2><p>æœ€å¾Œé€™é‚Šæä¸€ä¸‹å¦‚ä½•è¨­å®šçµ¦å¤šå¹³å°ä½¿ç”¨ï¼Œä¸€é–‹å§‹è—‰ç”±<code>npx create-bottender-app xxx</code>å¹«æˆ‘å€‘å»ºç«‹ app æ™‚é€™å€‹æª”æ¡ˆå°±æœƒè‡ªå‹•ç”Ÿæˆï¼Œbottender å¾ˆå¥½å¿ƒçš„æŠŠæ‰€æœ‰æ˜å°æ‰€æœƒç”¨åˆ°çš„ key å…¨éƒ¨éƒ½æœƒæ”¾åœ¨é€™è£¡é¢ã€‚<br><img src="https://i.imgur.com/Ba6I5HR.png"><br>ä»¥æˆ‘ç‚ºä¾‹æˆ‘å°±æœ‰ä½¿ç”¨åˆ° Messager ä¾†è©¦ç©ï¼Œé€™é‚Šå°±éœ€è¦æŠŠ<code>enabled</code>å•Ÿå‹•(false -&gt; true)ï¼Œå¯¦éš›å»ºç«‹ç²‰çµ²é ç›¸é—œå¯ä»¥<a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10218682">åƒè€ƒ</a></p>
<blockquote>
<p>é¡Œå¤–è©±: æœ€å¾Œå†ä½¿ç”¨<code>npx bottender messenger webhook set</code>å°±æœƒå¹«æˆ‘å€‘æŠŠ localhost ä¸²æ¥åˆ° Message ä¸Šï¼Œå¯¦åœ¨æ˜¯å¤ªè®šäº†ï¼ï¼ï¼</p>
</blockquote>
<h1 id="éƒ¨ç½²æ³¨æ„äº‹é …"><a href="#éƒ¨ç½²æ³¨æ„äº‹é …" class="headerlink" title="éƒ¨ç½²æ³¨æ„äº‹é …"></a>éƒ¨ç½²æ³¨æ„äº‹é …</h1><p>æˆ‘æ˜¯ä½¿ç”¨ Heroku ç•¶ä½œæˆ‘éƒ¨ç½²çš„ç’°å¢ƒï¼Œè«‹æœç”¨é€™ç¯‡<a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10228055">Heroku éƒ¨ç½²</a></p>
<p>åœ¨æœ¬åœ°ç«¯æ¸¬è©¦æ™‚æœƒç”¨åˆ°å¾ˆå¤šçš„ç’°å¢ƒè®Šæ•¸ï¼Œè€Œ Dialogflow API json çš„è·¯å¾‘æˆ‘æ˜¯é€éç’°å¢ƒè®Šæ•¸å»å–å¾—ï¼Œåœ¨ Heroku ä¸ŠæœƒæŠŠå°ˆæ¡ˆçš„å…§å®¹æ”¾åœ¨<code>/app</code>åº•ä¸‹(ä¸ç®¡ä½ å°ˆæ¡ˆå«ä»€éº¼åå­—)ï¼Œå› æ­¤ç’°å¢ƒè®Šæ•¸<code>GOOGLE_APPLICATION_CREDENTIALS</code>éœ€è¦è¼¸å…¥<code>/app/xx-ooo.json</code>é€™æ¨£å°±æœƒå–åˆ°ç•¶å‰ç›®éŒ„ä¸‹çš„æª”æ¡ˆå›‰ï¼</p>
<h1 id="çµè«–"><a href="#çµè«–" class="headerlink" title="çµè«–"></a>çµè«–</h1><p>ç¶“ç”±é€™æ¬¡è©¦ç©é€™å€‹ project è®“æˆ‘è¦ºå¾— <a target="_blank" rel="noopener" href="https://github.com/Yoctol/bottender">bottender</a> é€™å€‹ chatbot æ¡†æ¶æ•´åˆçœŸçš„æ˜¯å²å®³ï¼Œå¹«é–‹ç™¼è€…è™•ç†æ‰å¾ˆå¤šè·¨å¹³å°ä¸Šçš„å•é¡Œï¼Œæˆ‘èªç‚ºæœ€é…·çš„å°±æ˜¯ console modeï¼Œåœ¨æ¸¬è©¦ç¨‹å¼é‚è¼¯ä¸Šå¯ä»¥ä¸ç”¨æ¯æ¬¡éƒ½ä¸€ç›´ç”¨æ‰‹æ©Ÿé–‹ LINE æˆ–æ˜¯ FB ä¾†æ¸¬è©¦æ©Ÿå™¨äººç‹€æ…‹ï¼Œè€Œæ˜¯åœ¨çµ‚ç«¯æ©Ÿå°±è§£æ±ºé€™ä»¶äº‹ï¼Œé€™æ˜¯æˆ‘é–‹ç™¼æ©Ÿå™¨äººåˆ°ç›®å‰ç‚ºæ­¢è¦ºå¾—æœ€é…·çš„æ¨¡å¼ ğŸ‘ï¼</p>
<p>è€Œåœ¨é€™å€‹å°ˆæ¡ˆä¸Šæˆ‘ä½¿ç”¨åˆ° Dialogflowï¼Œé™¤äº†åƒè€ƒçš„åŸæ–‡ç•«é¢ (GCP é é¢) å·²æœ‰äº›è¨±æ›´å‹•å¤–ï¼Œå…¶å¯¦ä»‹æ¥çš„é€Ÿåº¦æ˜¯éå¸¸å¿«çš„ï¼Œæ­¤å¤–æˆ‘å¾ˆèªåŒåŸæ–‡ä½œè€…çš„è§€é»ï¼ŒæŠŠ Dialogflow æ¥åœ¨ç¨‹å¼å¾Œé¢æ‰å»è™•ç†é€™ä»¶äº‹æœƒå¢åŠ å¾ˆå¤šå½ˆæ€§ï¼Œç•¢ç«Ÿç•¶ä¸€å€‹<strong>å›æ‡‰</strong>ä¾†çš„æ™‚å€™å¯èƒ½æœƒæƒ³åšå…¶ä»–ä¸åŒçš„æ‡‰ç”¨ï¼Œæ­¤æ™‚è‹¥æ˜¯æ¨¡å‹å°±åœ¨å‰é¢å…ˆæŠŠè¨Šæ¯å›è¦†æ‰ï¼Œæœƒå¢åŠ å¾ˆå¤šé–‹ç™¼ä¸Šçš„å•é¡Œ(ç•¶ç„¶è‹¥ç°¡å–®çš„åŠŸèƒ½å–®äººæ²’å•é¡Œ ğŸ¤£)ã€‚</p>
<p>ç¸½è€Œè¨€ä¹‹ï½èª å¿ƒæ¨è–¦å¤§å®¶å»ç©ç© bottenderï¼Œä¹Ÿè¨±ä½ æœƒè·Ÿæˆ‘ä¸€æ¨£ç™¼ç¾äº†æ–°å¤§é™¸ ğŸ˜ã€‚</p>
<h1 id="åƒè€ƒ"><a href="#åƒè€ƒ" class="headerlink" title="åƒè€ƒ"></a>åƒè€ƒ</h1><p><a target="_blank" rel="noopener" href="https://dialogflow.com/">Dialogflow</a><br><a target="_blank" rel="noopener" href="https://console.cloud.google.com/?hl=zh-TW">GCP</a><br><a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10216040">Bottneder å»ºç«‹å°ˆæ¡ˆ</a><br><a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10228055">Heroku éƒ¨ç½²</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw">
    <link itemprop="mainEntityOfPage" href="https://nijialin.com/2019/12/01/Armeria-A-Microservice-Framework-Well-suited-Everywhere/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="NiJia Lin">
      <meta itemprop="description" content="You are what you do.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¿è€…å·¥åŠ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/01/Armeria-A-Microservice-Framework-Well-suited-Everywhere/" class="post-title-link" itemprop="url">2019 LINE Dev Day - è­°ç¨‹å¿ƒå¾—(3) - Armeria - A Microservice Framework Well-suited Everywhere</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>

              <time title="å‰µå»ºæ™‚é–“ï¼š2019-12-01 02:44:45" itemprop="dateCreated datePublished" datetime="2019-12-01T02:44:45+00:00">2019-12-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°æ–¼</span>
                <time title="ä¿®æ”¹æ™‚é–“ï¼š2023-03-22 06:17:50" itemprop="dateModified" datetime="2023-03-22T06:17:50+00:00">2023-03-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A0%94%E8%A8%8E%E6%9C%83/" itemprop="url" rel="index"><span itemprop="name">ç ”è¨æœƒ</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Armeria-A-Microservice-Framework-Well-suited-Everywhere"><a href="#Armeria-A-Microservice-Framework-Well-suited-Everywhere" class="headerlink" title="Armeria: A Microservice Framework Well-suited Everywhere"></a>Armeria: A Microservice Framework Well-suited Everywhere</h1><p><img src="https://i.imgur.com/MNnrFnm.jpg"></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://speakerdeck.com/line_devday2019/armeria-a-microservice-framework-well-suited-everywhere">ç°¡å ±é€£çµ</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/line/armeria">Github</a></li>
<li><a target="_blank" rel="noopener" href="https://line.github.io/armeria/">å®˜ç¶²</a></li>
</ul>
<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å¤§å®¶å¥½æˆ‘æ˜¯ <a target="_blank" rel="noopener" href="https://www.facebook.com/groups/chatbot.tw/">Chatbot Developer Taiwan</a> - NiJiaï¼Œå¾ˆé–‹å¿ƒé€™æ¬¡èƒ½å¤ ä»¥ LINE API Expert çš„èº«ä»½è¢«é‚€è«‹ä¾†åƒåŠ  LINE Developer Day 2019ã€‚</p>
<p>æœ¬æ¬¡è­°ç¨‹æ˜¯ç”±éŸ“åœ‹çš„ open source manager - <a target="_blank" rel="noopener" href="https://github.com/trustin">trustin</a> ç‚ºæˆ‘å€‘å¸¶ä¾†è­°ç¨‹ã€‚</p>
<p>è€Œåœ¨ä»Šå¹´åƒåŠ å…«æœˆèˆ‰è¾¦çš„ COSCUPï¼Œä¸¦ä¸”åœ¨ç¬¬ä¸€å¤©çš„ after party åƒåŠ  LINE BoF ä¸Šå°±å·²ç¶“çœ‹åˆ° LINE é–‹ç™¼çš„ Open Source - <a target="_blank" rel="noopener" href="https://github.com/line/armeria">Armeria</a>ï¼Œå®ƒæ˜¯åŸºæ–¼ Java æ‰€æ’°å¯«çš„ä¸€å€‹éåŒæ­¥çš„å°ˆæ¡ˆï¼Œæ”¯æ´ Java8, Netty, HTTP&#x2F;2, Thrift ä»¥åŠ gRPCï¼Œç•¶æ™‚è½åœ˜éšŠç°¡å–®ä»‹ç´¹å°±è¦ºå¾—é€™å€‹å°ˆæ¡ˆä¸€å®šæ˜¯å€‹å¾ˆä¸å¾—çš„å°ˆæ¡ˆï¼Œåªä¸éç•¶æ™‚å› ç‚ºä»–å€‘å¿«é€Ÿä»‹ç´¹å…’å°‘è½äº†å¾ˆå¤šç´°ç¯€ï¼Œé€™æ¬¡å°±æŠŠæˆ‘è½åˆ°çš„ç´°ç¯€å‘Šè¨´å„ä½å§ï¼</p>
<blockquote>
<p>æ“šä¹‹å‰çš„è­°ç¨‹çš„ä»¥åŠè¬›è€…çš„åˆ†äº«èªªé€™å€‹æœå‹™å·²ç¶“è¢«æ‡‰ç”¨æ–¼å¾ˆå¤š LINE æœå‹™è£¡é ­ï¼Œå› ç‚ºè¦ºå¾—å¥½ç”¨æ‰æ¨å‡ºä¾†ğŸ¤£</p>
</blockquote>
<h1 id="å¦‚ä½•è®“é–‹ç™¼è€…å¿«é€Ÿä½¿ç”¨-Armeria"><a href="#å¦‚ä½•è®“é–‹ç™¼è€…å¿«é€Ÿä½¿ç”¨-Armeria" class="headerlink" title="å¦‚ä½•è®“é–‹ç™¼è€…å¿«é€Ÿä½¿ç”¨ Armeria"></a>å¦‚ä½•è®“é–‹ç™¼è€…å¿«é€Ÿä½¿ç”¨ Armeria</h1><p>æ¥ä¸‹ä¾†å°±ç”¨ Java code ä¾†ç°¡å–®ç«åŠ›å±•ç¤ºå¦‚ä½•ç”¨ä¸€å€‹ä¸²è¯å¼å¯«æ³•æŠŠæœå‹™äº’å«èµ·ä¾†ï¼Œä¸ç®¡æ˜¯è¦ç”¨ä»€éº¼æœå‹™åªè¦ç”¨ä¸²æ¥çš„æ–¹å¼åŠ å…¥å³å¯ï¼Œåƒæ˜¯ gRPCã€Thriftã€annotationâ€¦ç­‰ç­‰å¦‚ä¸‹é¢å¹¾å¼µåœ–æ‰€ç¤ºã€‚</p>
<p><img src="https://i.imgur.com/KKU0eXG.png"></p>
<hr>
<p><img src="https://i.imgur.com/6rAex3K.png"></p>
<hr>
<p><img src="https://i.imgur.com/mAKhwh4.png"></p>
<hr>
<p><img src="https://i.imgur.com/Z9jfFkI.png"></p>
<blockquote>
<p>é€™é‚Šçœ‹åˆ°å¯ä»¥é€™éº¼ç°¡å–®å°±æŠŠä¸€å€‹æœå‹™å«èµ·ä¾†ï¼Œç„¶å¾Œè¦è®“ä»–é–‹ç™¼è€…å¯ä»¥å¾ˆè¼•æ˜“åœ°ç†è§£ä¸¦ä¸Šæ‰‹ï¼ŒLINE åœ˜éšŠçš„é–‹ç™¼æ–‡åŒ–çœŸçš„æ˜¯ä»¤äººä½©æœâ€¦</p>
</blockquote>
<h1 id="ç‚ºä»€éº¼è¦åšæˆ-async-ä»¥åŠ-reactive"><a href="#ç‚ºä»€éº¼è¦åšæˆ-async-ä»¥åŠ-reactive" class="headerlink" title="ç‚ºä»€éº¼è¦åšæˆ async ä»¥åŠ reactive"></a>ç‚ºä»€éº¼è¦åšæˆ async ä»¥åŠ reactive</h1><p>é¦–å…ˆå°±å…ˆæåˆ°è‹¥ Queue è£¡é ­çš„æ±è¥¿è‹¥æ˜¯éƒ½ sync çš„è©±æœƒæœ‰ä»€éº¼å•é¡Œï¼Œé€™é‚Šå°±ä»¥ä¸€å€‹ Call API å¸¸é‡åˆ°çš„å•é¡Œ - Timeoutï¼Œåœ¨å¤§é‡çš„ Queue åœ¨æ’éšŠæ™‚ï¼Œä»¥ sync çš„æ–¹å¼å­˜åœ¨æ™‚å…‰é‡åˆ° Timeout å°±æœƒæœ‰æœå‹™å™¨çˆ†ç‚¸çš„å•é¡Œï¼Œå› ç‚ºå½¼æ­¤ä¸èƒ½å½±éŸ¿å½¼æ­¤ï¼Œä¸”é€™ä»¶äº‹æœƒç™¼ç”Ÿåœ¨çœŸå¯¦ä¸–ç•Œçš„æ¯å€‹åœ°æ–¹ã€‚<br><img src="https://i.imgur.com/Telr7lG.jpg"></p>
<hr>
<p><img src="https://i.imgur.com/hkltFFS.jpg"></p>
<p>é€™é‚Šè¬›è€…æå‡ºçš„è§£æ±ºæ–¹æ¡ˆç‚ºï¼š</p>
<ul>
<li>å¢åŠ åŸ·è¡Œç·’çš„æ¨™è¨˜(#)ä¸¦ä¸”æ¸›å°‘å‘¼å«å †ç–Š(stack)</li>
<li>é æº–å‚™ Tread pools è®“å¤§å®¶äº’ç›¸å…±äº«</li>
<li>å°‘èª¿ç”¨ points</li>
<li>ä½¿ç”¨éåŒæ­¥çš„å¥½è™•å°±æ˜¯èƒ½å¤ å¹³è¡Œå‘¼å«+è¼ƒå°‘çš„åŸ·è¡Œç·’</li>
</ul>
<p>ç¾åœ¨ä»–å€‘èƒ½ç”¨éåŒæ­¥çš„æ–¹å¼è§£æ±ºç³»çµ±è¢«é–ä½çš„å•é¡Œï¼Œä½†ä»Šå¤©è‹¥é‡åˆ°ä¸€å€‹å¾ˆè‚¥ï½çš„ payload å‘¢ï¼Ÿä»¥ç¯„ä¾‹ä¾†èªªè‹¥ä¸€å€‹ç”¨æˆ¶é€ä»– 10 MB çš„å¤§å°ï¼Œä¸€æ¬¡é€çµ¦ 100K å€‹ç”¨æˆ¶å°±ç›¸ç•¶æ–¼ 1 TB å¤§å°çš„æµé‡ã€‚</p>
<p>é€™é‚Šä½¿ç”¨çš„æ–¹æ³•æ˜¯ç”¨ä¸åŒçš„é »å¯¬ &amp; è™•ç†èƒ½åŠ›ï¼Œä¸¦ä¸”åªéœ€è¦è¶³å¤ çš„ buffer ä¾†æ’é™¤  Out of Memory çš„éŒ¯èª¤ã€‚</p>
<p><img src="https://i.imgur.com/10mGUaD.jpg"></p>
<p>è½åˆ°é€™é‚Šçœ‹èµ·ä¾†æ˜¯ä½¿ç”¨ç›¸é—œçš„å·¥å…·ä¾†è®“æ•´å€‹ä¸²æ¥æœå‹™å¯ä»¥æ›´æœ‰æ•ˆçš„ Debugï¼Œæœ€å¾Œé€é Kibana ä¾†è®“è¨Šæ¯å¯è¦–åŒ–ï¼Œè®“ Debug å¯ä»¥æ›´åŠ å¿«é€Ÿã€‚</p>
<blockquote>
<p>è‹¥å°ç›¸é—œ Debug å·¥å…·å¯ä»¥åƒè€ƒæˆ‘ä¹‹å‰å¯«çš„ <a href="https://nijialin.com/2019/11/12/sentry-in-serverless/">Sentry æ–‡ç« </a></p>
</blockquote>
<blockquote>
<p>Kibana å¯åƒè€ƒï¼š <a target="_blank" rel="noopener" href="https://blog.toright.com/posts/5319/fulltext-search-elasticsearch-kibana-bigdata.html">å®‰è£ ElasticSearch + Kibana å¯¦ç¾ä¸­æ–‡å…¨æ–‡æœå°‹èˆ‡æ•¸æ“šåˆ†æ</a></p>
</blockquote>
<h1 id="çµè«–"><a href="#çµè«–" class="headerlink" title="çµè«–"></a>çµè«–</h1><p>ç¶“éäº†è¬›è€…ä¸€é€£ä¸²çš„ç«åŠ›å±•ç¤ºå¾Œæ„Ÿå—åˆ° LINE å°æ–¼ open source æœ‰å¤šéº½çš„é‡è¦–ï¼Œé€£ Slack ä¹Ÿéƒ½æ„›ä¸Š Armeria é€™å¥— Java å‡½å¼åº«ï¼Œç”¨æ–¼ä»–å€‘çš„è»Ÿé«”ä¸­ä¸¦å…¬é–‹æ¨è–¦ï¼Œè®“åƒæˆ‘é€™ç¨®å–œæ­¡åš open source çš„å·¥ç¨‹å¸«å¯ä»¥ç‡ƒèµ·æ–°å¸Œæœ›ç¹¼çºŒç‚ºé–‹æºåšåŠªåŠ›ã€‚<br><img src="https://i.imgur.com/eKYqMpo.png"></p>
<p>å…¶å¯¦é‚„æœ‰å¾ˆå¤šæŠ€è¡“ç´°ç¯€çš„éƒ¨åˆ†åœ¨ç°¡å ±è£¡ï¼Œé€™é‚Šæˆ‘å°±ä¸å†å¤šå®¶è´…è¿°ï¼Œå¤§å®¶å¯ä»¥åƒè€ƒ <a target="_blank" rel="noopener" href="https://github.com/line/armeria">GitHub</a>ï¼Œè£¡é¢æœ‰æ›´åŠ è©³ç´°çš„ç”¨æ³•æä¾›çµ¦å¤§å®¶ã€‚</p>
<p>é€™æ¬¡ä¾† LINE Developer Day è®“æˆ‘æ„Ÿå—åˆ°ä¸åŒæ–¼å…¶ä»–å¤§å…¬å¸çš„æ–‡åŒ–ï¼Œé™¤äº†ç²¾å½©çš„è­°ç¨‹å¤–ä¹Ÿæ‹›å¾…æˆ‘å€‘é€™ç¾¤ LINE API Expert å‰ä¾†å…±è¥„ç››èˆ‰ï¼Œè‹¥ä½ ä¹Ÿæƒ³æˆç‚º LINE API Expertï¼Œä¸å¦¨æ‹¿è‘—ä½ çš„è²¢ç»ä¾†ç”³è«‹çœ‹çœ‹<a target="_blank" rel="noopener" href="https://www.line-community.me/contributors/request">é€£çµ</a>ï¼Œæˆ–è¨±æ˜å¹´æˆ‘å€‘å°±èƒ½ä¸€èµ·å»å•¦ï¼</p>
<p>æˆ–æ˜¯ä½ æƒ³é¢å°é¢ç›´æ¥å•å•çœ‹ï¼Œä¹Ÿå¯ä»¥ä¾† <a target="_blank" rel="noopener" href="https://www.facebook.com/groups/chatbot.tw/">Chatbot Taiwan</a> åƒåŠ æˆ‘å€‘ä¸€å€‹æœˆä¸€æ¬¡çš„ç¤¾ç¾¤èšæœƒå–”ï¼æˆ‘å€‘æ™‚å¸¸æœƒé‚€è«‹ LINE çš„è³‡æ·±æŠ€è¡“å‚³æ•™å£« - Evan ä¾†ç‚ºå„ä½å¸¶ä¾†ç¬¬ä¸€æ‰‹ LINE çš„è³‡è¨Šï¼Œä¹Ÿè¨±å¯ä»¥è·Ÿä»–è©¢å•çœ‹çœ‹ï¼Œæˆ–è¨±æœƒæœ‰æ„å¤–çš„æ”¶ç©«å–”ï¼<br><img src="https://i.imgur.com/kIDIfPl.jpg"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw">
    <link itemprop="mainEntityOfPage" href="https://nijialin.com/2019/11/21/How-we-continuously-delivery-LINE-TODAY-App-with-high-agility-and-high-quality/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="NiJia Lin">
      <meta itemprop="description" content="You are what you do.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¿è€…å·¥åŠ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/11/21/How-we-continuously-delivery-LINE-TODAY-App-with-high-agility-and-high-quality/" class="post-title-link" itemprop="url">2019 LINE Dev Day - è­°ç¨‹å¿ƒå¾—(2) - How we continuously delivery LINE TODAY App with high agility and high quality</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>

              <time title="å‰µå»ºæ™‚é–“ï¼š2019-11-21 16:55:53" itemprop="dateCreated datePublished" datetime="2019-11-21T16:55:53+00:00">2019-11-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°æ–¼</span>
                <time title="ä¿®æ”¹æ™‚é–“ï¼š2023-03-22 06:17:50" itemprop="dateModified" datetime="2023-03-22T06:17:50+00:00">2023-03-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A0%94%E8%A8%8E%E6%9C%83/" itemprop="url" rel="index"><span itemprop="name">ç ”è¨æœƒ</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="How-we-continuously-delivery-LINE-TODAY-App-with-high-agility-and-high-quality"><a href="#How-we-continuously-delivery-LINE-TODAY-App-with-high-agility-and-high-quality" class="headerlink" title="How we continuously delivery LINE TODAY App with high agility and high quality"></a>How we continuously delivery LINE TODAY App with high agility and high quality</h1><p><img src="https://i.imgur.com/ZGXdq4F.png"></p>
<p>ç°¡å ±é€£çµ: <a target="_blank" rel="noopener" href="https://speakerdeck.com/line_devday2019/how-we-continuously-delivery-line-today-app-with-high-agility-and-high-quality">URL</a></p>
<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å¤§å®¶å¥½æˆ‘æ˜¯ <a target="_blank" rel="noopener" href="https://www.facebook.com/groups/chatbot.tw/">Chatbot Developer Taiwan</a> - NiJiaï¼Œå¾ˆé–‹å¿ƒé€™æ¬¡èƒ½å¤ ä»¥ LINE API Expert çš„èº«ä»½è¢«é‚€è«‹ä¾†åƒåŠ  LINE Developer Day 2019ã€‚</p>
<p>é€™å€‹è­°ç¨‹æ˜¯é›£å¾—å‡ºç¾çš„å°ç£äººï¼Œä¸€é–‹å§‹åªæ˜¯æƒ³èªªè½çœ‹çœ‹ LINE TODAY æ˜¯å¦‚ä½•é€éç¶­æŒé«˜åº¦æ•æ·ä»¥åŠä¿æŒé«˜å“è³ªï¼Œå…¶å¯¦ä¹Ÿå°±æ˜¯çå­æ‘¸è±¡ï¼Œçµæœè½åˆ°è‡ªæˆ‘ä»‹ç´¹å¾Œç™¼ç¾æ˜¯å°ç£äººä¾†è¬›ï¼Œæ„Ÿè¦ºå°±æ˜¯åœ¨ç•°åœ°è½åˆ°ä¸€å€‹å°ç£å‘³çš„å£éŸ³è¦ºå¾—å¾ˆè¦ªåˆ‡ğŸ¤£</p>
<p>æ¥ä¸‹ä¾†å°±çœ‹ä¸€ä¸‹æˆ‘è½å®Œé€™å ´çš„å¿ƒå¾—å§!</p>
<h1 id="è² è²¬å°ˆæ¡ˆ"><a href="#è² è²¬å°ˆæ¡ˆ" class="headerlink" title="è² è²¬å°ˆæ¡ˆ"></a>è² è²¬å°ˆæ¡ˆ</h1><ul>
<li>LINE</li>
<li>LINE TODAY</li>
<li>LINE SDK</li>
<li>LINE MUSIC(Taiwan)<br><img src="https://i.imgur.com/nVgupO1m.jpg"><br>æœ€è¿‘å¸¸å¸¸å‡ºç¾åœ¨å·¦ä¸Šè§’çš„é‚£å€‹ LINE MUSIC</li>
</ul>
<h2 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h2><p><img src="https://i.imgur.com/WTUuqWX.png"></p>
<p>å¾ Pull Request - Code review - Build pipeline - unit test - UI test - deploy</p>
<p>ç•¶ä¸­æåˆ°å…©å€‹ä¸»è¦éƒ¨åˆ†ï¼š</p>
<ul>
<li>Unit test: è¦†è“‹ç‡æœ€å¥½è¦å¤šå°‘ï¼Ÿ</li>
<li>UI test: è‡ªå‹•åŒ–æ¸¬è©¦çš„å¯ä¿¡åº¦ï¼Ÿ</li>
</ul>
<p><img src="https://i.imgur.com/kNu9cv9.jpg"><br>ä¸”åœ¨æ¸¬è©¦ç•¶ä¸­æœƒæœ‰ä¸€ç¨®æ¸¬è©¦å«åš flaky testï¼Œæœ‰æ™‚å€™æ¸¬è©¦æœ‰éã€æœ‰æ™‚å€™æœ‰æ²’éï¼Œå®Œå…¨è®“äººæ‘¸ä¸è‘—é ­ç·’çš„æ¸¬è©¦ï¼Œé€™æœƒå‚·å®³åˆ°è»Ÿé«”å“è³ªä»¥åŠè¦†è“‹ç‡ï¼Œå› æ­¤è‹¥é€™ç¨®ç‹€æ³å‡ºç¾æ™‚è¶•å¿«è™Ÿæ‹›åœ˜éšŠçš„äººä¾†è¨è«–é€™å€‹ç‹€æ…‹æ˜¯å¦è™•ç†ã€‚</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://blog.castman.net/%E7%A0%94%E7%A9%B6/2016/06/06/flaky-tests.html">flaky test</a></p>
</blockquote>
<h2 id="UI-è‡ªå‹•åŒ–æ¸¬è©¦"><a href="#UI-è‡ªå‹•åŒ–æ¸¬è©¦" class="headerlink" title="UI è‡ªå‹•åŒ–æ¸¬è©¦"></a>UI è‡ªå‹•åŒ–æ¸¬è©¦</h2><p>åœ¨é€™éƒ¨åˆ†æåˆ°èªª UI test code å¥½å¯«ä½†æ˜¯é›£å»ç¶­è­·ï¼Œä¸»è¦åœ¨æ–¼ UI çš„æ±è¥¿å¯èƒ½æœƒå› ç‚ºè£ç½®ã€ä½œæ¥­ç³»çµ±â€¦ç­‰ç­‰çš„å•é¡Œå»å½±éŸ¿åˆ°ï¼Œä¸”æœƒå¾ˆå®¹æ˜“å‡ºç¾ flaky testï¼Œé€™é‚Šæˆ‘è©¢å•è¬›è€…å¾—åˆ°çš„ç­”æ¡ˆæ˜¯æ¸¬è©¦åªè¦ç¢ºèªåœ¨ç•¶å‰ UI ä¸Šæœ€é‡è¦çš„å…ƒä»¶è‹¥æœ‰å‡ºä¾†çš„è©±é€™éƒ¨åˆ†çš„æ¸¬è©¦å°±çµ¦éï¼Œè‹¥å¤ªç²¾ç´°çš„æ¸¬è©¦æ™‚å¸¸æœƒå½±éŸ¿åˆ°æ•´é«”çš„é–‹ç™¼æ•æ·åº¦èˆ‡æµæš¢åº¦ã€‚</p>
<blockquote>
<p>æƒ³æƒ³ä¹Ÿæ˜¯æœ‰é“ç†ï¼Œå¹³å¸¸è½åˆ°äººå®¶èªªæ¸¬è©¦æ¸¬è©¦çš„ï¼Œåªæ˜¯ç•¶ä»Šå¤©æ¸¬è©¦æ™‚çš„ç©¶ç«Ÿæ˜¯è¦åˆ°å¤šè©³ç´°é‚„æ˜¯è¦å–æ±ºæ–¼åœ˜éšŠçš„æ±ºå®šã€‚</p>
</blockquote>
<p>é€™æ®µè¬›è€…æœ‰æåˆ°è¦æ³¨æ„ UI Automation test æ˜¯ <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Smoke_testing_(software)">Smoke test</a>ï¼Œå› æ­¤è¦æ³¨æ„<strong>ç¶­è­·æˆæœ¬</strong>ä»¥åŠ<strong>flaky test</strong>çš„å•é¡Œï¼</p>
<h2 id="é©—æ”¶æ¨™æº–-Acceptance-Criteria"><a href="#é©—æ”¶æ¨™æº–-Acceptance-Criteria" class="headerlink" title="é©—æ”¶æ¨™æº– - Acceptance Criteria"></a>é©—æ”¶æ¨™æº– - <a target="_blank" rel="noopener" href="https://www.altexsoft.com/blog/business/acceptance-criteria-purposes-formats-and-best-practices/">Acceptance Criteria</a></h2><p><img src="https://i.imgur.com/N5ovDf7.jpg"></p>
<p>æ¥è‘—å°±æåˆ°åœ˜éšŠéœ€è¦æº–å‚™å„ç¨®æƒ…å¢ƒæ‰€éœ€è¦çš„æ±è¥¿ï¼š</p>
<ul>
<li>ä¸ä¸€æ¨£çš„æ¸¬è©¦è³‡æ–™ä¾†è®“ç”¢å“æœ‰<strong>å½ˆæ€§</strong>ä¸”æ˜¯<strong>å¯ä¿¡è³´</strong></li>
<li>è‹¥æœ‰é‡å°é¡ä¼¼ Database é€™é¡çš„æ¸¬è©¦åœ˜éšŠå‰‡æ›´éœ€è¦å»æ³¨æ„æ¸¬è©¦ç´°ç¯€é¿å…å°è‡´ç‰¹ç•°æƒ…æ³<br>ç¸½ä¹‹å°±æ˜¯ Product Owner(PO) æ˜¯éœ€è¦è¨‚å®šåœ˜éšŠè¦å‰‡ä¸¦è®“å¤§å®¶å»éµå®ˆï¼Œç¢ºä¿å“è³ªï¼</li>
</ul>
<p><img src="https://i.imgur.com/Vq13ngl.png"><br>é€™è£¡æœ‰æåˆ°ä»–å€‘ç¶“ç”±ä¸Šè¿°åˆ¶å®šå¥½çš„é©—æ”¶æ¨™æº–ä¹‹å¾Œï¼Œéš¨è‘— Release ç‰ˆæœ¬ä¹‹å¾Œçš„æ‰‹å‹•æ¸¬è©¦æ¯”ç‡é€æ¼¸æ¸›å°‘ï¼Œåˆ°å¾Œä¾†éƒ½æ˜¯åå‘è‡ªå‹•åŒ–æ¸¬è©¦å»è™•ç†ï¼Œä¸”æ˜¯æœ‰åœ˜éšŠå¯ä¿¡åº¦ã€‚</p>
<h2 id="Code-Coverage"><a href="#Code-Coverage" class="headerlink" title="Code Coverage"></a>Code Coverage</h2><p>é€™é‚Šä»¥ iOS é–‹ç™¼ç‚ºä¾‹ï¼Œé¦–å…ˆå°±æ˜¯ MVC æ¡†æ¶ä¸Šæ‰€é‡åˆ°çš„å•é¡Œï¼Œå®˜ç¶²éƒ½æ˜¯ä»¥ MVC ä¸‹å»åšç¯„ä¾‹ï¼Œä½†å¯¦éš›ä¸Šé–‹ç™¼èµ·ä¾†å‰‡æ˜¯é‚„å¾—ä»¥ MVVM çš„æ¡†æ¶å»åŸ·è¡Œåœ¨æ¸¬è©¦çš„éƒ¨åˆ†æ‰ä¸æœƒæ¡å¤ªå¤šä¸å¿…è¦çš„å‘ã€‚<br><img src="https://i.imgur.com/WOIgOQe.png"><br>æ¥ä¸‹ä¾†æåˆ°çš„éƒ¨åˆ†æˆ‘è¦ºå¾—æ˜¯é€™å€‹è­°ç¨‹æœ€é‡è¦çš„ä¸€éƒ¨åˆ†ï¼Œå°±æ˜¯å¦‚ä½•å»å–æ¨è¦†è“‹ç¯„åœï¼Œåƒæ˜¯ä¸Šåœ–é¡¯ç¤ºï¼Œå¯èƒ½æœƒæœ‰ä¸€äº› Callback æˆ–æ˜¯å…¶ä»–çš„æ˜¯ä¸å¯é æœŸçš„ç¯„åœï¼Œåœ˜éšŠéœ€è¦å°‡é€™äº›å•é¡Œä¸€ä¸€åˆ—å‡ºä¾†è¨è«–ï¼Œä¸¦ä¸”å»åˆ¶å®šä¸€å€‹æœ€ä½æ¨™æº–ä»¥åŠ Must have çš„æ¨™æº–ï¼Œä¿ƒä½¿åœ˜éšŠå¯ä»¥æ›´æœ‰è¦å‰‡çš„å»é€²è¡Œé–‹ç™¼ï¼Œå¦‚ä¸‹åœ–æ‰€ç¤ºã€‚<br><img src="https://i.imgur.com/jidpVl3.png"></p>
<h1 id="çµè«–"><a href="#çµè«–" class="headerlink" title="çµè«–"></a>çµè«–</h1><p>å…¶å¯¦ä¸€å®¶å…¬å¸å¾ˆé¡˜æ„èŠ±æˆæœ¬å»è®“é–‹ç™¼è€…å¯ä»¥å»å¯«å„ç¨®æ¸¬è©¦ç¢ºèªæœå‹™å“è³ªï¼Œè‹¥æ˜¯ä»¥æ™®éç’°å¢ƒä¾†èªªé€™çœŸçš„æ˜¯å¾ˆé›£äººå¯è²´çš„åœ°æ–¹ï¼Œæ­¤å¤–å¾ä¸­ä¹Ÿäº†è§£åˆ°ä¸€å€‹å¥½çš„æµç¨‹æ‡‰è©²æ˜¯å¦‚ä½•ï¼Œå¾è«‡éœ€æ±‚åˆ°é–‹ç™¼ä¸­é–“æ‰€è¦ç¶“æ­·éå¤šå°‘äº‹æ‰èƒ½è®“ä¸€å€‹æœå‹™èµ·ä¾†ï¼Œæ¸¬è©¦é€™éƒ¨åˆ†çœŸçš„æ˜¯å¾ˆå¤§çš„ä¸€é–€å­¸å•ï¼Œåƒè¬åˆ¥å¯«ä¸€å †æ¸¬è©¦ä½†é€™å€‹æ¸¬è©¦åªæ˜¯è‡ªå·±æ¸¬é–‹å¿ƒçš„ï¼Œè€Œæ˜¯è¦è®“æ¸¬è©¦çš„å…§å®¹å¯ä»¥è®“åœ˜éšŠå¾ˆæ”¾å¿ƒçš„å°‡ code äº¤çµ¦æ¸¬è©¦å»é©—è­‰ï¼Œé”åˆ°é€™æ¨£å­ç›®çš„çš„ç¨‹å¼æˆ‘ç›¸ä¿¡åœ¨å¸‚å ´ä¸Šä¸€å®šæ˜¯å¾ˆèƒ½æ¥å—è€ƒé©—çš„ï¼<br><img src="https://i.imgur.com/HnFB307.png"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw">
    <link itemprop="mainEntityOfPage" href="https://nijialin.com/2019/11/21/Seamless-device-migration-using-LINE-secure-backup/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="NiJia Lin">
      <meta itemprop="description" content="You are what you do.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¿è€…å·¥åŠ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/11/21/Seamless-device-migration-using-LINE-secure-backup/" class="post-title-link" itemprop="url">2019 LINE Dev Day - è­°ç¨‹å¿ƒå¾—(1) - Seamless device migration using LINE secure backup</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>

              <time title="å‰µå»ºæ™‚é–“ï¼š2019-11-21 06:58:09" itemprop="dateCreated datePublished" datetime="2019-11-21T06:58:09+00:00">2019-11-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°æ–¼</span>
                <time title="ä¿®æ”¹æ™‚é–“ï¼š2023-03-22 06:17:50" itemprop="dateModified" datetime="2023-03-22T06:17:50+00:00">2023-03-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A0%94%E8%A8%8E%E6%9C%83/" itemprop="url" rel="index"><span itemprop="name">ç ”è¨æœƒ</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Seamless-device-migration-using-LINE-secure-backup"><a href="#Seamless-device-migration-using-LINE-secure-backup" class="headerlink" title="Seamless device migration using LINE secure backup"></a>Seamless device migration using LINE secure backup</h1><p><img src="https://i.imgur.com/IWGmnvQ.jpg"></p>
<p>ç°¡å ±é€£çµ: <a target="_blank" rel="noopener" href="https://speakerdeck.com/line_devday2019/seamless-device-migration-using-line-secure-backups">LINE Dev Day 2019</a></p>
<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å¤§å®¶å¥½æˆ‘æ˜¯ <a target="_blank" rel="noopener" href="https://www.facebook.com/groups/chatbot.tw/">Chatbot Developer Taiwan</a> - NiJiaï¼Œé€™æ¬¡è¢« LINE é‚€è«‹ä¾†åƒåŠ  LINE Developer Day 2019ã€‚<br>ç¶“ç”± æ¯ä½è² è²¬äººçš„ Keynote é–‹å ´å®Œå¾Œå°±æ˜¯æœƒçœ¾å€‘é–‹å§‹è½è­°ç¨‹çš„æ™‚å€™äº†ï¼Œæˆ‘é¸æ“‡è·Ÿè³‡å®‰ç›¸é—œçš„ä¸»é¡Œä¾†é–‹å§‹æˆ‘ä»Šæ—¥çš„ç¬¬ä¸€å ´è­°ç¨‹ï¼Œæƒ³æƒ³åœ¨æ¥è§¸è³‡å®‰æ™‚é‚„æ˜¯å¤§å­¸æ™‚æœŸå‘¢(é æœ›)ã€‚</p>
<h1 id="å¿ƒå¾—"><a href="#å¿ƒå¾—" class="headerlink" title="å¿ƒå¾—"></a>å¿ƒå¾—</h1><p>é–‹å ´ä¸å…ä¿—çš„ä¸€å®šæ˜¯è¦è‡ªæˆ‘ä»‹ç´¹ä¸¦èªªä¸»è¦å¤§ç¶±ï¼Œè¬›è€…æœ¬èº«ç‚ºä¸€å€‹é§­å®¢ä¸¦æ˜¯ <a target="_blank" rel="noopener" href="https://github.com/SideChannelMarvels">Side-Channel Marvels</a> æˆå“¡ä¹‹ä¸€ï¼Œåœ¨ GitHub ä¸Šåäº†ä¸€å€‹é€†å‘å·¥ç¨‹çš„å·¥å…· - <a target="_blank" rel="noopener" href="https://github.com/QBDI/QBDI">QBDI</a>ã€‚è€Œä½œç‚ºä¸€å€‹ Hacker ç ´å£ç•¶ç„¶å°ä»–å€‘ä¾†èªªæ˜¯ç›¸å°ç°¡å–®ï¼Œä½†æ›å€‹æ–¹å‘ä¾†çœ‹ï¼Œå°±æ˜¯é€éæ»²é€æ¸¬è©¦ä¾†å»ºç«‹æ›´å®Œæ•´çš„æœå‹™å…§å®¹ï¼Œçš„ç¢ºåœ¨çœŸå¯¦ä¸–ç•Œä¸Šè¦æ‘§æ¯€ä¸€å€‹æœå‹™æ˜¯ç›¸å°å®¹æ˜“çš„ï¼</p>
<p>ä½†è¬›è€…æ˜¯åœ¨ LINE é€™ç¨®è¦æ¨¡è¼ƒå¤§çš„å…¬å¸è£¡åšæ»²é€æ¸¬è©¦ï¼Œåœ¨æ»²é€å¾Œåšå®Œæ¸¬è©¦å ±å‘Šæ™‚éœ€è¦é¡§æ…®åˆ°å…¶ä»–é–‹ç™¼åœ˜éšŠçš„å·¥ä½œæ™‚ç¨‹å•é¡Œï¼Œä¹Ÿè¨±é€™å€‹æ¼æ´åœ¨å¯¦éš›æœå‹™é‹è½‰ä¸Šçš„å®¹éŒ¯ç‡æ˜¯ç›¸å°é«˜çš„è©±ï¼Œå°±å¯ä»¥è®“é–‹ç™¼åœ˜éšŠå®‰æ’æ™‚ç¨‹å»ä¿®è£œæ¼æ´è€Œé¿å…å»¶é²ç”¢å“ä¸Šç·šæ™‚é–“ã€‚</p>
<p> <img src="https://i.imgur.com/r60FVBM.jpg"></p>
<p>é€™é‚Šä¸»è¦æåˆ°ä¸€äº› <strong>åŠ å¯†å”å®šåŸå‰‡</strong> ä»¥åŠå‚³çµ±è¨Šæ¯å‚³é€éƒ½æ˜¯æ€éº¼åšã€‚<br><img src="https://i.imgur.com/wJHnXMz.jpg"><br>æ¥è‘—èªªåˆ°å¸³è™Ÿè½‰ç§»è£ç½®æ™‚çš„å•é¡Œï¼Œä»Šå¤©è¦å¾èˆŠçš„è£ç½®å‚™ä»½åˆ°æ–°è£ç½®æ™‚ï¼Œè‹¥é€é Server çš„è©±ä»–åªæœ‰åŠ å¯†éå¾Œçš„è³‡æ–™ï¼Œå¦‚æ­¤ä¸€ä¾†æ ¹æœ¬ç„¡æ³•å‚™ä»½éå»ï¼Œè€Œ end-to-end çš„å‚™ä»½çš„è©±æœƒé‡åˆ°ä»¥ä¸‹å•é¡Œï¼š</p>
<ul>
<li>æœƒå—åˆ°å„ç¨®é€šè¨Šå”å®šçš„å•é¡Œ(wifi, Bluetooth, NFCâ€¦)</li>
<li>ios - andriod ä¸åŒè£ç½®ç›¸å®¹æ€§å•é¡Œ</li>
<li>éœ€è¦é‡æ–°å»ºæ§‹è¨Šæ¯æ¨¡å‹</li>
<li>è¦æ€éº¼è™•ç†ä¾†è‡ª parameter çš„æ”»æ“Š<ul>
<li>Hacker é€éä¸­é–“äººæ”»æ“Š</li>
<li>æœƒé€éå„ç¨®ç‹€æ…‹ä¾†æ‰¾å°‹æ¼æ´ (BGP, DNS, Certificate PKIâ€¦)</li>
</ul>
</li>
</ul>
<h2 id="UX-x-Security"><a href="#UX-x-Security" class="headerlink" title="UX x Security"></a>UX x Security</h2><p>å‰é¢ç°¡å–®ä»‹ç´¹ä¸€äº›å‚™ä»½ä¸Šçš„å•é¡Œä»¥è£ç½®é–“çš„å•é¡Œï¼Œæ¥ä¸‹ä¾†å°±é€²å…¥å¦‚ä½•åœ¨æœ€å¥½çš„ä½¿ç”¨è€…é«”é©—ä¸Šä¸¦æ“æœ‰è³‡è¨Šå®‰å…¨ï¼š</p>
<h3 id="è‹¥è¦æœ€å¥½çš„ä½¿ç”¨è€…é«”é©—-Best-UX"><a href="#è‹¥è¦æœ€å¥½çš„ä½¿ç”¨è€…é«”é©—-Best-UX" class="headerlink" title="è‹¥è¦æœ€å¥½çš„ä½¿ç”¨è€…é«”é©— - Best UX"></a>è‹¥è¦æœ€å¥½çš„ä½¿ç”¨è€…é«”é©— - Best UX</h3><p><img src="https://i.imgur.com/E3N0d5l.jpg" alt="æµç¨‹"></p>
<ul>
<li>âœ…ä¸éœ€è¦åœ¨æ„è£ç½®é–“çš„å•é¡Œ</li>
<li>âŒæœƒè¢«é§­å®¢é€éä¸­é–“äººæ”»æ“Šå»å¡æœ‰å•é¡Œçš„è³‡æ–™</li>
<li>âŒå®‰å…¨å±¤ç´šç­‰æ–¼é›¶</li>
</ul>
<blockquote>
<p>é€™æ¨£å…¬å¸å°±ä¸ç”¨é‹ä½œå•¦ (ç¬‘)</p>
</blockquote>
<h3 id="æœ€å®‰å…¨çš„ç­‰ç´šä½†æœ€å·®çš„-UX"><a href="#æœ€å®‰å…¨çš„ç­‰ç´šä½†æœ€å·®çš„-UX" class="headerlink" title="æœ€å®‰å…¨çš„ç­‰ç´šä½†æœ€å·®çš„ UX"></a>æœ€å®‰å…¨çš„ç­‰ç´šä½†æœ€å·®çš„ UX</h3><p><img src="https://i.imgur.com/RFkmVAE.jpg" alt="Best security"></p>
<ul>
<li>âœ…Private key åŠ å¯†éä¸¦ä¸”æ“æœ‰æœ€é›£ç ´è§£çš„å¯†ç¢¼</li>
<li>âŒä½¿ç”¨è€…æ ¹æœ¬è¨˜ä¸å¾—é€™å¯†ç¢¼</li>
<li>âŒå¯†ç¢¼éæ–¼è¤‡é›œ</li>
</ul>
<blockquote>
<p>é€™é‚Šè¬›è€…æœ‰è£œå……è‹¥æ˜¯åªæœ‰å…­ä½æ•¸çš„å¯†ç¢¼ä»–å¤§æ¦‚æœ‰ <strong>ä¸€ç™¾è¬</strong> ç¨®å¯èƒ½æ€§ï¼Œå¯ä»¥é€éæš´åŠ›ç ´è§£çš„æ–¹å¼å°±è§£æ±ºï¼Œä¸”æœ‰å¤§ç´„ <strong>10%</strong> çš„å¯†ç¢¼æ˜¯é‡è¦†æ€§å¾ˆé«˜çš„ï¼Œå› æ­¤é‚„æ˜¯å»ºè­°æ“æœ‰å¤§å°å¯«ä»¥åŠç‰¹æ®Šç¬¦è™Ÿæ˜¯ç›¸å°å¥½ï¼</p>
</blockquote>
<p>æ¯å¤©éƒ½æœƒæœ‰å¼±å¯†ç¢¼å‡ºç¾æ–¼ç”Ÿæ´»ä¸­</p>
<ul>
<li>combination padlock<ul>
<li>ç¡¬é«”è¨­å‚™éƒ½ç”¨å¾ˆå¼±çš„åŠ å¯†å”å®š</li>
</ul>
</li>
<li>Banking card PIN<ul>
<li>å¾ˆå®¹æ˜“å‡ºç¾åƒæ˜¯ <strong>ç”Ÿæ—¥</strong> é€™é¡çš„å¯†ç¢¼</li>
</ul>
</li>
<li>smart phone lock screen<ul>
<li>ä½¿ç”¨è€…æ±‚å¿« </li>
<li>ARM trustZone &#x2F; apple secure</li>
</ul>
</li>
</ul>
<h2 id="Server-Side-ç›¸é—œç›¸é—œåŠ å¯†å…ƒä»¶"><a href="#Server-Side-ç›¸é—œç›¸é—œåŠ å¯†å…ƒä»¶" class="headerlink" title="Server Side ç›¸é—œç›¸é—œåŠ å¯†å…ƒä»¶"></a>Server Side ç›¸é—œç›¸é—œåŠ å¯†å…ƒä»¶</h2><ul>
<li><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Trusted_execution_environment">Trusted execution environment(TEE)</a>: ä¿è­· process ç›¸é—œ</li>
<li><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Trusted_Platform_Module">Trusted Platform Module(TPM)</a>: å¾®æ§åˆ¶å™¨ç›¸é—œåŠ å¯†å…ƒä»¶</li>
<li><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E7%A1%AC%E4%BB%B6%E5%AE%89%E5%85%A8%E6%A8%A1%E5%9D%97">Hardware security module(HSM)</a>: ä¸€ç¨®ç”¨æ–¼ä¿éšœå’Œç®¡ç†å¼·èªè­‰ç³»çµ±æ‰€ä½¿ç”¨çš„æ•¸å­—é‡‘é‘°ï¼Œä¸¦åŒæ™‚æä¾›ç›¸é—œå¯†ç¢¼å­¸æ“ä½œçš„é›»è…¦ç¡¬é«”è£ç½®ã€‚</li>
</ul>
<h2 id="HSM-in-backups"><a href="#HSM-in-backups" class="headerlink" title="HSM in backups"></a>HSM in backups</h2><p>æ¥è‘—å°±ä»‹ç´¹æ˜¯å¦‚ä½•é€é HSM çš„ç¡¬é«”å…ƒä»¶ä¾†è™•ç†å‚™ä»½è³‡æ–™è³‡å®‰çš„å•é¡Œ<br><img src="https://i.imgur.com/CSkYEHD.jpg"><br>é€éç¡¬é«”(HSM)ä¾†å¹«å¿™åŠ å¯†ç¢ºä¿æ¯ä¸€æ®µä¸Šå‚³ä¸‹è¼‰éƒ½æ˜¯å®‰å…¨ä¸”å¯åŠ è§£å¯†ï¼Œä½¿ç”¨è€…åœ¨é€™éç¨‹ä¸­ä¹Ÿä¸éœ€è¦è¼¸å…¥ä¸€å¤§ä¸²çš„å¯†ç¢¼å°±åªé¡§åŠè³‡è¨Šå®‰å…¨è€Œæ”¾æ£„ UXï¼Œè€Œåœ¨ HSM ç•¶ä¸­æœƒå°‡ç§é‘°å®‰å…¨çš„å­˜ä¸‹ä¾†ï¼Œä¸ç”¨æ“”å¿ƒæœƒæœ‰è¢«æ””å–ä¹‹é¡çš„å•é¡Œã€‚</p>
<p>ç”±æ–¼ HSM ç¶“éé›™é‡åŠ å¯†èªè­‰é”åˆ°è³‡è¨Šå®‰å…¨ä¸”æ˜¯å®‰å…¨çš„å„²å­˜ä¸‹ä¾†ï¼Œå› æ­¤ä¸æœƒå› ç‚ºè¢«æŠ“åˆ°ä¹‹å¾Œå°±é¦¬ä¸Šè¢«è§£é–‹ï¼Œç¢ºä¿æ•´å€‹è³‡æ–™å‚³éä¸Šçš„å®‰å…¨æ€§ã€‚</p>
<p><img src="https://i.imgur.com/A6Mo2mw.jpg"><br>ä¸Šåœ–å‰‡ç‚º HSM ç°½è­‰å…¬é‘°çš„è¨»å†Šæµç¨‹ï¼Œç¶“ç”±ä¸€é€£ä¸²çš„åŠ å¯†æŠŠå®ƒå­˜æˆäºŒé€²åˆ¶ source codeï¼Œä¸”è£ç½®é‚„æ˜¯èƒ½ä½¿ç”¨ public key ä¾†è§£é–‹é€™å€‹äºŒé€²åˆ¶æª”æ¡ˆï¼Œå¦‚æ­¤ä¸€ä¾†åœ¨å‚™ä»½åˆ°æ–°è£ç½®ä¸Šå°±ä¸ç”¨æ“”å¿ƒæ•´åŒ…è³‡æ–™çš„å®‰å…¨æ€§äº†ï¼</p>
<h1 id="çµè«–"><a href="#çµè«–" class="headerlink" title="çµè«–"></a>çµè«–</h1><p>æˆ‘å€‘åœ¨å¯¦ä½œçš„ç¶²ç«™åœ¨æ²’ä»€éº¼æµé‡æ™‚éƒ½ä¸å¤ªéœ€è¦æ³¨æ„è³‡å®‰ç›¸é—œï¼Œä½†ç•¶ç³»çµ±è«‹æ±‚è¶Šä¾†è¶Šå¤§æˆ–æ˜¯æœ‰é‡‘æµæ™‚åœ¨æ¯æ®µçš„åŠ è§£å¯†çµ‚ç©¶éƒ½ç›¸å°é‡è¦å¾ˆå¤šï¼Œä¸”åœ¨å»ºç«‹ UX ä»¥åŠ Security ä¹‹é–“è¦å¦‚ä½•å¹³è¡¡ä¹Ÿæ˜¯å€‹é‡è¦çš„è­°é¡Œï¼Œå¦‚åŒè¬›è€…èªªçš„ï¼Œåœ¨åšé€™äº›æŠ€è¡“çš„åŒæ™‚ä¸”ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Š(LINE)å°æ–¼ç™½å¸½é§­å®¢çš„æˆå°±æ„Ÿæ˜¯æºæºä¸çµ•çš„ï¼Œèƒ½å¤ é€éæ»²é€ä¾†è®“æˆ‘å€‘æ¯å¤©åœ¨ç”¨çš„æ±è¥¿æ›´åŠ å®Œæ•´ä¹Ÿæ˜¯å¾ˆæ£’çš„ä¸€å€‹ä½œæ³•ğŸ˜Šã€‚</p>
<p>è€Œéå¾€åœ¨è½é§­å®¢æœ‹å‹å€‘åœ¨èŠéƒ½æ˜¯åœ¨è¬› <a target="_blank" rel="noopener" href="https://www.techbang.com/posts/1826-waf-web-host-bridge-is-falling-down">WAF</a> è¼ƒå¤šæ˜¯åœ¨è¬› Web application ç›¸é—œçš„ï¼Œé€™æ¬¡è½åˆ°çš„ HSM åŠŸèƒ½çœ‹èµ·ä¾†é›–ç„¶å¾ˆç›¸ä¼¼ï¼Œä½†çœ‹ä¾†æ˜¯å«å°ˆæ³¨åœ¨è³‡æ–™çš„åŠ è§£å¯†ç•¶ä¸­ï¼Œæˆ–è¨±ç•¶ä¸­æ‡‰è©²é‚„æœ‰æ›´æ·±å…¥çš„åŠŸèƒ½é‚„æœªæåˆ°ï¼Œé€éé€™å€‹è­°ç¨‹èªè­˜åˆ°æ–°çš„æ±è¥¿ä¹Ÿæ˜¯ä¸€å¤§æ”¶ç©«ğŸ˜ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/15/"><i class="fa fa-angle-left" aria-label="ä¸Šä¸€é "></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><span class="page-number current">16</span><a class="page-number" href="/page/17/">17</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/17/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é "></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®éŒ„
        </li>
        <li class="sidebar-nav-overview">
          æœ¬ç«™æ¦‚è¦
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="NiJia Lin"
      src="/uploads/avatar.jpg">
  <p class="site-author-name" itemprop="name">NiJia Lin</p>
  <div class="site-description" itemprop="description">You are what you do.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">198</span>
          <span class="site-state-item-name">æ–‡ç« </span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">24</span>
        <span class="site-state-item-name">åˆ†é¡</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">258</span>
        <span class="site-state-item-name">æ¨™ç±¤</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/louis70109" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;louis70109" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:louis70109@gmail.com" title="E-Mail â†’ mailto:louis70109@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.facebook.com/linnijia/" title="FB Page â†’ https:&#x2F;&#x2F;www.facebook.com&#x2F;linnijia&#x2F;" rel="noopener" target="_blank"><i class="fab fa-facebook fa-fw"></i>FB Page</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">NiJia Lin</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="//cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
<script src="//cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script>
<script src="/js/algolia-search.js"></script>














  

  

</body>
</html>
